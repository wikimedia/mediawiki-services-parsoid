{
	"A table with captions with non-default spaced attributes and a table row": {
		"wt2wt": "{|\n|+ style=\"color: red;\" |caption2\n|+ style=\"color: red;\" |caption3\n|-\n|foo\n|}"
	},
	"Accept \"| !\" at start of line in tables (ignore !-attribute)": {
		"wt2wt": "{|\n|-\n| !style=\"color:red\" |bar\n|}"
	},
	"Allow +/- in 2nd and later cells in a row, in 1st cell when td-attrs are present, or in 1st cell when there is a space between \"|\" and +/- ": {
		"wt2wt": "{|\n|-\n| style=\"color:red;\" | +1\n| style=\"color:blue;\" | -1\n|-\n|1||2||3\n|1||+2||-3\n|-\n| +1\n| -1\n|}"
	},
	"Build table with pipe as data": {
		"wt2wt": "{| class=\"wikitable\"\n!header\n!second header\n|- style=\"color:red;\"\n|data|| style=\"color:red;\" |second data\n|-\n| style=\"color:red;\" |<nowiki>data with |</nowiki>|| style=\"color:red;\" |second data with |\n|-\n||<nowiki>data with |</nowiki>|||second data with |\n|}"
	},
	"Invalid attributes in table cell (T3830)": {
		"wt2wt": "{|\n| Cell: |broken\n|}"
	},
	"Multi-line extension tags should not interrupt table-cell parsing in the same row": {
		"wt2html": "<table data-parsoid='{\"dsr\":[0,114,2,2]}'>\n<tbody data-parsoid='{\"dsr\":[3,112,0,0]}'><tr data-parsoid='{\"startTagSrc\":\"|-\",\"dsr\":[3,51,2,0]}'>\n<td data-parsoid='{\"dsr\":[6,9,1,0]}'>a1</td><td data-parsoid='{\"stx\":\"row\",\"dsr\":[9,43,2,0]}'>b1 <span typeof=\"mw:Extension/spantag\" about=\"#mwt\" data-parsoid='{\"dsr\":[14,43,9,10]}' data-mw='{\"name\":\"spantag\",\"attrs\":{},\"body\":{\"extsrc\":\"\\n{{1x|c1}}\"}}'>\n<span about=\"#mwt\" typeof=\"mw:Transclusion\" data-parsoid='{\"pi\":[[{\"k\":\"1\"}]],\"dsr\":[24,33,null,null]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"1x\",\"href\":\"./Template:1x\"},\"params\":{\"1\":{\"wt\":\"c1\"}},\"i\":0}}]}'>c1</span></span></td><td data-parsoid='{\"stx\":\"row\",\"dsr\":[43,47,2,0]}'>d1</td><td data-parsoid='{\"stx\":\"row\",\"dsr\":[47,51,2,0]}'>e1</td></tr>\n<tr data-parsoid='{\"startTagSrc\":\"|-\",\"dsr\":[52,111,2,0]}'>\n<td data-parsoid='{\"dsr\":[55,58,1,0]}'>a2</td><td data-parsoid='{\"stx\":\"row\",\"dsr\":[58,103,2,0]}'><a rel=\"mw:WikiLink\" href=\"./Main_Page\" title=\"Main Page\" data-parsoid='{\"stx\":\"simple\",\"a\":{\"href\":\"./Main_Page\"},\"sa\":{\"href\":\"Main Page\"},\"dsr\":[60,73,2,2]}'>Main Page</a> <span typeof=\"mw:Extension/spantag\" about=\"#mwt\" data-parsoid='{\"dsr\":[74,103,9,10]}' data-mw='{\"name\":\"spantag\",\"attrs\":{},\"body\":{\"extsrc\":\"\\n{{1x|c2}}\"}}'>\n<span about=\"#mwt\" typeof=\"mw:Transclusion\" data-parsoid='{\"pi\":[[{\"k\":\"1\"}]],\"dsr\":[84,93,null,null]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"1x\",\"href\":\"./Template:1x\"},\"params\":{\"1\":{\"wt\":\"c2\"}},\"i\":0}}]}'>c2</span></span></td><td data-parsoid='{\"stx\":\"row\",\"dsr\":[103,107,2,0]}'>d2</td><td data-parsoid='{\"stx\":\"row\",\"dsr\":[107,111,2,0]}'>e2</td></tr>\n</tbody></table>\n\n<table data-parsoid='{\"dsr\":[116,230,2,2]}'>\n<tbody data-parsoid='{\"dsr\":[119,228,0,0]}'><tr data-parsoid='{\"startTagSrc\":\"|-\",\"dsr\":[119,167,2,0]}'>\n<th data-parsoid='{\"dsr\":[122,125,1,0]}'>a3</th><th data-parsoid='{\"stx\":\"row\",\"dsr\":[125,167,2,0]}'>b3 <span typeof=\"mw:Extension/spantag\" about=\"#mwt\" data-parsoid='{\"dsr\":[130,159,9,10]}' data-mw='{\"name\":\"spantag\",\"attrs\":{},\"body\":{\"extsrc\":\"\\n{{1x|c3}}\"}}'>\n<span about=\"#mwt\" typeof=\"mw:Transclusion\" data-parsoid='{\"pi\":[[{\"k\":\"1\"}]],\"dsr\":[140,149,null,null]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"1x\",\"href\":\"./Template:1x\"},\"params\":{\"1\":{\"wt\":\"c3\"}},\"i\":0}}]}'>c3</span></span>!!d3!!e3</th></tr>\n<tr data-parsoid='{\"startTagSrc\":\"|-\",\"dsr\":[168,227,2,0]}'>\n<th data-parsoid='{\"dsr\":[171,174,1,0]}'>a4</th><th data-parsoid='{\"stx\":\"row\",\"dsr\":[174,227,2,0]}'><a rel=\"mw:WikiLink\" href=\"./Main_Page\" title=\"Main Page\" data-parsoid='{\"stx\":\"simple\",\"a\":{\"href\":\"./Main_Page\"},\"sa\":{\"href\":\"Main Page\"},\"dsr\":[176,189,2,2]}'>Main Page</a> <span typeof=\"mw:Extension/spantag\" about=\"#mwt\" data-parsoid='{\"dsr\":[190,219,9,10]}' data-mw='{\"name\":\"spantag\",\"attrs\":{},\"body\":{\"extsrc\":\"\\n{{1x|c4}}\"}}'>\n<span about=\"#mwt\" typeof=\"mw:Transclusion\" data-parsoid='{\"pi\":[[{\"k\":\"1\"}]],\"dsr\":[200,209,null,null]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"1x\",\"href\":\"./Template:1x\"},\"params\":{\"1\":{\"wt\":\"c4\"}},\"i\":0}}]}'>c4</span></span>!!d4!!e4</th></tr>\n</tbody></table>",
		"wt2wt": "{|\n|-\n|a1||b1 <spantag>\n{{1x|c1}}</spantag>||d1||e1\n|-\n|a2||[[Main Page]] <spantag>\n{{1x|c2}}</spantag>||d2||e2\n|}\n\n{|\n|-\n!a3!!b3 <spantag>\n{{1x|c3}}</spantag><nowiki>!!d3!!e3</nowiki>\n|-\n!a4!![[Main Page]] <spantag>\n{{1x|c4}}</spantag><nowiki>!!d4!!e4</nowiki>\n|}"
	},
	"Nested table": {
		"wt2wt": "{| border=\"1\"\n|&alpha;\n|\n{| bgcolor=\"#ABCDEF\" border=\"2\"\n|nested\n|-\n|table\n|}\n|the original table again\n|}"
	},
	"Parsoid: Row-syntax table headings followed by comment & table cells": {
		"wt2wt": "{|\n!foo||bar\n<!-- foo -->||baz||quux\n|}"
	},
	"Table cell attributes: Pipes protected by nowikis should be treated as a plain character": {
		"wt2wt": "{|\n| title=\"foo\" |bar\n| title=\"foo<nowiki>|</nowiki>\" |bar\n|title=\"foo<nowiki>|</nowiki>\" bar\n|}"
	},
	"Table lines with multiple newlines, spaces, comments embedded in file caption": {
		"wt2wt": "[[File:Foobar.jpg|thumb|\n  <!--cmt-->   \n{|\n  \n |test\n   <!--cmt-->\n|}]]"
	},
	"Table rowspan": {
		"wt2wt": "{| border=\"1\"\n|Cell 1, row 1\n| rowspan=\"2\" |Cell 2, row 1 (and 2)\n|Cell 3, row 1\n|-\n|Cell 1, row 2\n|Cell 3, row 2\n|}"
	},
	"Table td-cell syntax variations": {
		"wt2wt": "{|\n| foo bar |baz\n|foo bar foo||baz\n| style=\"color:red;\" |baz\n|style='color:red;'||baz\n|}"
	}
}
