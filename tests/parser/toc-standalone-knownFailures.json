{
    "Basic section headings": {
        "html2wt": "== Headline 1 ==\nSome text\n\n== Headline 2 ==\nMore\n\n=== Smaller headline ===\nBlah blah\n"
    },
    "Disable TOC": {
        "html2wt": "Lead\n\n== Section 1 ==\n\n== Section 2 ==\n\n== Section 3 ==\n\n== Section 4 ==\n\n== Section 5 ==\n"
    },
    "Header with space, plus and underscore as entity": {
        "html2wt": "Id should not contain + for spaces\n\n== Space between Text ==\nsection 1\n\n== Space-Entity&#32;between&#32;Text ==\nsection 2\n\n== Plus+between+Text ==\nsection 3\n\n== Plus-Entity&#43;between&#43;Text ==\nsection 4\n\n== Underscore_between_Text ==\nsection 5\n\n== Underscore-Entity&#95;between&#95;Text ==\nsection 6\n\n[[#Space between Text]]\n[[#Space-Entity&#32;between&#32;Text]]\n[[#Plus+between+Text]]\n[[#Plus-Entity&#43;between&#43;Text]]\n[[#Underscore_between_Text]]\n[[#Underscore-Entity&#95;between&#95;Text]]",
        "selser [0,2,2,0,0,0,0,0,[4],0,4,4,1,0,[2,2,0,0,0,3],0,2,2,4,4,1,0,3,0,3,4,[2,0,3,0,[3],0,2,0,[2],2,3]]": "Id should not contain + for spaces\n\n1e8fhcc\n\ngwns8k\n\n==Space between Text==\nsection 1\n\n==Space-Entity&#32;between&#32;Text==\n1oseclj\n\n1lsmtzn\n\n16gxbeb\n\nsection 3\n\n==uezobz1ej2nsrPlus-Entity&#43;between&#43;==\ntkbaqj\n\nsection 4\n\n1h7bbhn\n\nc3j5nl\n\n1jot8ev\n\nsection 5\n\n1lry7du\n\nezkk98[[#Space between Text]]\n\n142itti[[#Plus-Entity+between+Text]]\n[[#Underscore_between_Text|1o8d6mv#Underscore_between_Text]]11rp7fu\n",
        "selser [[2],4,3,4,0,0,[0,0,2,0,4],0,4,3,[1,0],0,3,3,3,0,0,3,4,0,1,0,[0,0,4,0,3],0,3,0,[[3],0,3,2,[2],0,2,2,3,2,1]]": "xvd2vfId should not contain + for spaces\n\ndstvp9\n\nbovqku\n\nsection 1\n\n==Space-Entity&#32;x50r04between&#32;152ivas==\n9wzb95\n\n==Plus+between+Text==\n\nsection 4\n\n1yz8bx6\n\nsection 5\n\n==Underscore-Entity&#95;13owwo7&#95;==\n\nfyum48\n[[#Plus+between+Text|y4mykj#Plus+between+Text]]\n10d9f9y[[#Plus-Entity+between+Text]]1nfkzn3\n1cpnrfq\n[[#Underscore-Entity_between_Text]]",
        "selser [1,0,3,2,2,2,2,4,3,2,[0,2],4,3,0,2,3,4,0,2,0,0,4,[3,0,0,0,0],0,4,0,[[3],0,0,0,4,4,3,0,1,0,[4]]]": "Id should not contain + for spaces\n\ne478jx\n\n2764wc\n\nsection 1\n\npy107h\n\n1fn3z1h\n\n==Space-Entity&#32;between&#32;Text==\n1x8xdeo\n\n1vb78ht\n\n==1h83c7sPlus+between+Text==\nafdonq\n\nu9oqag\n\n==Plus-Entity&#43;between&#43;Text==\n156fpkv\n\nnw0nlu\n\n==Underscore_between_Text==\nsection 5\n\nei48lt\n\n==&#95;between&#95;Text==\n76x2bv\n\n[[#Space-Entity between Text]]\nk8d2jdbjumab\n[[#Underscore_between_Text]]\n[[#Underscore-Entity&#95;between&#95;Text|vyetii]]",
        "selser [[3],4,2,0,3,0,2,3,1,0,[0,4],3,2,0,0,0,2,2,0,0,0,0,[0,0,0,0,2],0,1,4,[0,0,2,4,4,2,0,0,0,0,0]]": "\n\n11z3i5v\n\nyfbzdw\n\n==Space between Text==\n\n144gngw\n\n==Space-Entity&#32;between&#32;Text==\nsection 2\n\n==1tq33tr==\n1bcu1ef\n\nsection 3\n\n==Plus-Entity&#43;between&#43;Text==\nmw77mg\n\nsection 4\n\npfium3\n\n==Underscore_between_Text==\nsection 5\n\n==Underscore-Entity&#95;between&#95;1k6w2feText==\nsection 6\n\n1yafgdj\n\n[[#Space between Text]]\n2vjusr[[#Space-Entity between Text]]<nowiki/>sl2p2p1p21bea1vzyilt\n[[#Plus-Entity+between+Text]]\n[[#Underscore_between_Text]]\n[[#Underscore-Entity_between_Text]]",
        "selser [0,2,3,3,4,0,4,3,2,4,[0,2],0,1,3,[2,0,0,2,0,2],3,3,0,2,0,0,4,[0,0,4,0,0],0,[2],4,1]": "Id should not contain + for spaces\n\nshz78l\n\nqc8gcw\n\ndalg06\n\n6sp07p\n\nsection 2\n\n1hsul7m\n\n==whds2cPlus+between+Text==\nsection 3\n==84znc6Plus-Entity&#43;1swp9d3between&#43;17yhhtjText==\n\n1uujs7w\n\n==Underscore_between_Text==\nsection 5\n\n1a8q7k9\n\n==Underscore-Entity&#95;13856rq&#95;Text==\n4352aksection 6\n\n2blsya\n\n[[#Space between Text]]\n[[#Space-Entity between Text]]\n[[#Plus+between+Text]]\n[[#Plus-Entity+between+Text]]\n[[#Underscore_between_Text]]\n[[#Underscore-Entity_between_Text]]",
        "selser [2,2,[2],3,[3],0,4,3,[2],0,4,3,[2],4,[0,3,0,0,0,0],0,0,2,4,0,0,3,2,0,3,0,[[2],0,1,0,[3],0,[4],0,0,3,2]]": "q0w53o\n\nId should not contain + for spaces\n\n1mfh02r\n\n==emyw37Space between Text==\n\n\nnyicr1\n\ngaqamqsection 2\n\nzlpvck\n\np9lznzsection 3\n\nngqc5c\n\n==&#43;between&#43;Text==\nsection 4\n\ncj8t9f\n\n11ivr7z\n\nsection 5\n\nljtjdt\n\n==Underscore-Entity&#95;between&#95;Text==\n\n[[#Space between Text|k1rcd5#Space between Text]]\n[[#Space-Entity between Text]]\n\n[[#Plus-Entity&#43;between&#43;Text|c1g6ei]]\n[[#Underscore_between_Text]]1wriyis[[#Underscore-Entity_between_Text]]",
        "selser [0,0,[4],4,0,0,[3,0,2,0,2],3,[3],4,[2,3],0,[3],0,3,3,0,3,0,0,0,4,4,0,4,0,1]": "Id should not contain + for spaces\n\n==mdrcuo==\ncfswi1\n\nsection 1\n\n==&#32;a72f8hbetween&#32;1c00bhuText==\n\n\n1qce24d\n\n==1dsd0h3==\n\nsection 4\n==Underscore_between_Text==\nsection 5\n\n1janytz\n\n1yhwxbg\n\nfmx8ma\n\n[[#Space between Text]]\n[[#Space-Entity between Text]]\n[[#Plus+between+Text]]\n[[#Plus-Entity+between+Text]]\n[[#Underscore_between_Text]]\n[[#Underscore-Entity_between_Text]]",
        "selser [0,2,0,0,1,0,1,2,1,0,1,2,4,3,[0,0,0,0,0,4],3,1,4,1,0,[2],0,4,0,[3],0,[0,0,0,4,4,0,4,0,4,0,4]]": "Id should not contain + for spaces\n\nkx57n9\n\n==Space between Text==\nsection 1\n\n==Space-Entity&#32;between&#32;Text==\n979kz7\nsection 2\n\n==Plus+between+Text==\nypwcu0\nthua0f\n\n==Plus-Entity&#43;between&#43;1hijt8c==\nsection 4\n\n8v9zer\n\n==Underscore_between_Text==\n124tcagsection 5\n\n1wu8co6\n\n\n[[#Space between Text]]\n[[#Space-Entity between Text]]1wacc9dfeyxcb\n5rwu8i\nn6hxec\nu8h1a5",
        "selser [[4],0,1,4,3,0,3,2,0,2,[0,2],3,[2],0,[4,2,0,4,0,4],4,0,3,1,0,2,0,[2,0,0,0,3],0,4,4,[[3],0,2,0,[2],3,0,0,[4],0,3]]": "714e1v\n\n==Space between Text==\n1mjmiuk\n\n1toxtb9\n\nsection 2\n\n1wj9gt9\n\n==13tmkn2Plus+between+Text==\naetgjbsection 3\n\n==1hrq016132x4kyPlus-Entity&#43;1jkkmmf&#43;1rfh0gz==\nd5qxvi\n\nsection 4\n==Underscore_between_Text==\n1sj3rwb\n\nsection 5\n\n==zddmibUnderscore-Entity&#95;between&#95;==\n8qfcsl\n\n1qlsba4\n\nddzuyg[[#Space-Entity between Text]]\n[[#Plus+between+Text|cnjipv#Plus+between+Text]][[#Plus-Entity+between+Text]]\n[[#Underscore_between_Text|166q757]]\n",
        "selser [2,0,4,2,0,2,4,2,[2],0,2,4,[4],0,1,0,4,0,[2],0,3,4,[3,0,4,0,4],0,3,4,1]": "1fc36dr\n\nId should not contain + for spaces\n\nhz6abi\n\nbj68x9\n\nsection 1\n\n4p7tv\n\n1m5n1ox\n\n8bz4n7\n\n1oigcussection 2\n\n1qzdk17\n\n==Plus+between+Text==\n1ts4m9l\n\nhwmdae\n\n==Plus-Entity&#43;between&#43;Text==\n1alkpma\n\n==n9cqllUnderscore_between_Text==\n9tl5lj\n\n==&#95;1dlvyzg&#95;12i5hob==\n1ht5m0i\n\n[[#Space between Text]]\n[[#Space-Entity between Text]]\n[[#Plus+between+Text]]\n[[#Plus-Entity+between+Text]]\n[[#Underscore_between_Text]]\n[[#Underscore-Entity_between_Text]]"
    },
    "Header with special characters (T27462)": {
        "html2wt": "The tooltips shall not show entities to the user (ie. be double escaped)\n\n== text > text ==\nsection 1\n\n== text < text ==\nsection 2\n\n== text & text ==\nsection 3\n\n== text ' text ==\nsection 4\n\n== text \" text ==\nsection 5",
        "selser [3,2,3,0,4,0,3,3,1,4,1,0,4,4,[0,3],0,[4],3,[3,0],0,0]": "17gdt2k\n\n1jltxmn\n\nsection 2\n\nn2b5xt\n\n==text & text==\n1p9a9an\n\n1yupftd\n\n1jbpp2d\n\n==text \" text==\nsection 5",
        "selser [[2],3,2,2,[4],2,4,4,3,0,4,0,[4],3,[1,0],2,[3],0,2,0,[3]]": "j43btgThe tooltips shall not show entities to the user (ie. be double escaped)\n\n5rn6g9\n\n==text > text==\no18ilq\nnj8372\n\ni9mcmd\n\n1gs3sns\n\n14wknp6\n\nzrrrb2\n\nw7iboh\n\n==text ' text==\n1qpdiyh\n\n\nypbypv\n\n==text \" text==\n"
    },
    "Link inside a section heading": {
        "html2wt": "== Section with a [[Main Page|link]] in it ==\n"
    },
    "Out-of-order TOC heading levels": {
        "wt2html": "<h2 id=\"2\" data-parsoid='{\"dsr\":[0,5,2,2]}'>2</h2>\n<h6 id=\"6\" data-parsoid='{\"dsr\":[6,19,6,6]}'>6</h6>\n<h3 id=\"3\" data-parsoid='{\"dsr\":[20,27,3,3]}'>3</h3>\n<h1 id=\"1\" data-parsoid='{\"dsr\":[28,31,1,1]}'>1</h1>\n<h5 id=\"5\" data-parsoid='{\"dsr\":[32,43,5,5]}'>5</h5>\n<h2 id=\"2_2\" data-parsoid='{\"dsr\":[44,49,2,2]}'>2</h2>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,808,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,347,42,6]}'>\n<h2 id=\"Contents\" data-parsoid='{\"dsr\":[229,243,2,2,1,1]}'>Contents</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[244,341,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[349,800,0,0]}'><li data-parsoid='{\"dsr\":[349,573,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#2\"},\"sa\":{\"href\":\"#2\"},\"dsr\":[351,421,5,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[356,388,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[389,419,22,7]}'>2</span></a>\n<ul data-parsoid='{\"dsr\":[422,573,0,0]}'><li data-parsoid='{\"dsr\":[422,497,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#6\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#6\"},\"sa\":{\"href\":\"#6\"},\"dsr\":[425,497,5,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[430,464,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[465,495,22,7]}'>6</span></a></li>\n<li data-parsoid='{\"dsr\":[498,573,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#3\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#3\"},\"sa\":{\"href\":\"#3\"},\"dsr\":[501,573,5,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[506,540,24,7]}'>1.2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[541,571,22,7]}'>3</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[574,800,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#1\"},\"sa\":{\"href\":\"#1\"},\"dsr\":[576,646,5,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[581,613,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[614,644,22,7]}'>1</span></a>\n<ul data-parsoid='{\"dsr\":[647,800,0,0]}'><li data-parsoid='{\"dsr\":[647,722,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#5\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#5\"},\"sa\":{\"href\":\"#5\"},\"dsr\":[650,722,5,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[655,689,24,7]}'>2.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[690,720,22,7]}'>5</span></a></li>\n<li data-parsoid='{\"dsr\":[723,800,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#2_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#2_2\"},\"sa\":{\"href\":\"#2_2\"},\"dsr\":[726,800,7,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[733,767,24,7]}'>2.2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[768,798,22,7]}'>2</span></a></li></ul></li></ul>\n\n</div>\n\n<h2 id=\"2\" data-parsoid='{\"dsr\":[810,817,2,2,1,1]}'>2</h2>\n\n<h6 id=\"6\" data-parsoid='{\"dsr\":[819,834,6,6,1,1]}'>6</h6>\n\n<h3 id=\"3\" data-parsoid='{\"dsr\":[836,845,3,3,1,1]}'>3</h3>\n\n<h1 id=\"1\" data-parsoid='{\"dsr\":[847,852,1,1,1,1]}'>1</h1>\n\n<h5 id=\"5\" data-parsoid='{\"dsr\":[854,867,5,5,1,1]}'>5</h5>\n\n<h2 id=\"2_2\" data-parsoid='{\"dsr\":[869,876,2,2,1,1]}'>2</h2>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\">\n== Contents ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#2|<span class=\"tocnumber\">1</span> <span class=\"toctext\">2</span>]]\n** [[#6|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">6</span>]]\n** [[#3|<span class=\"tocnumber\">1.2</span> <span class=\"toctext\">3</span>]]\n* [[#1|<span class=\"tocnumber\">2</span> <span class=\"toctext\">1</span>]]\n** [[#5|<span class=\"tocnumber\">2.1</span> <span class=\"toctext\">5</span>]]\n** [[#2_2|<span class=\"tocnumber\">2.2</span> <span class=\"toctext\">2</span>]]\n\n</div>\n\n== 2 ==\n\n====== 6 ======\n\n=== 3 ===\n\n= 1 =\n\n===== 5 =====\n\n== 2 ==\n"
    },
    "Resolving duplicate section names": {
        "html2wt": "== Foo bar ==\n\n== Foo bar ==\n"
    },
    "Resolving duplicate section names with differing case (T12721)": {
        "html2wt": "== Foo bar ==\n\n== Foo Bar ==\n"
    },
    "Section headings with TOC": {
        "wt2html": "<h2 id=\"Headline_1\" data-parsoid='{\"dsr\":[0,14,2,2]}'>Headline 1</h2>\n<h3 id=\"Subheadline_1\" data-parsoid='{\"dsr\":[15,34,3,3]}'>Subheadline 1</h3>\n<h5 id=\"Skipping_a_level\" data-parsoid='{\"dsr\":[35,61,5,5]}'>Skipping a level</h5>\n<h6 id=\"Skipping_a_level_2\" data-parsoid='{\"dsr\":[62,90,6,6]}'>Skipping a level</h6>\n\n<h2 id=\"Headline_2\" data-parsoid='{\"dsr\":[92,106,2,2]}'>Headline 2</h2>\n<p data-parsoid='{\"dsr\":[107,116,0,0]}'>Some text</p>\n<h3 id=\"Another_headline\" data-parsoid='{\"dsr\":[117,139,3,3]}'>Another headline</h3>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,967,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,347,42,6]}'>\n<h2 id=\"Contents\" data-parsoid='{\"dsr\":[229,243,2,2,1,1]}'>Contents</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[244,341,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[349,959,0,0]}'><li data-parsoid='{\"dsr\":[349,762,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Headline_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Headline_1\"},\"sa\":{\"href\":\"#Headline_1\"},\"dsr\":[351,439,14,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[365,397,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[398,437,22,7]}'>Headline 1</span></a>\n<ul data-parsoid='{\"dsr\":[440,762,0,0]}'><li data-parsoid='{\"dsr\":[440,762,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Subheadline_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Subheadline_1\"},\"sa\":{\"href\":\"#Subheadline_1\"},\"dsr\":[443,539,17,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[460,494,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[495,537,22,7]}'>Subheadline 1</span></a>\n<ul data-parsoid='{\"dsr\":[540,762,0,0]}'><li data-parsoid='{\"dsr\":[540,762,3,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Skipping_a_level\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Skipping_a_level\"},\"sa\":{\"href\":\"#Skipping_a_level\"},\"dsr\":[544,648,20,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[564,600,24,7]}'>1.1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[601,646,22,7]}'>Skipping a level</span></a>\n<ul data-parsoid='{\"dsr\":[649,762,0,0]}'><li data-parsoid='{\"dsr\":[649,762,4,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Skipping_a_level_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Skipping_a_level_2\"},\"sa\":{\"href\":\"#Skipping_a_level_2\"},\"dsr\":[654,762,22,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[676,714,24,7]}'>1.1.1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[715,760,22,7]}'>Skipping a level</span></a></li></ul></li></ul></li></ul></li>\n<li data-parsoid='{\"dsr\":[763,959,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Headline_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Headline_2\"},\"sa\":{\"href\":\"#Headline_2\"},\"dsr\":[765,853,14,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[779,811,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[812,851,22,7]}'>Headline 2</span></a>\n<ul data-parsoid='{\"dsr\":[854,959,0,0]}'><li data-parsoid='{\"dsr\":[854,959,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Another_headline\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Another_headline\"},\"sa\":{\"href\":\"#Another_headline\"},\"dsr\":[857,959,20,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[877,911,24,7]}'>2.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[912,957,22,7]}'>Another headline</span></a></li></ul></li></ul>\n\n</div>\n\n<h2 id=\"Headline_1\" data-parsoid='{\"dsr\":[969,985,2,2,1,1]}'>Headline 1</h2>\n\n<h3 id=\"Subheadline_1\" data-parsoid='{\"dsr\":[987,1008,3,3,1,1]}'>Subheadline 1</h3>\n\n<h5 id=\"Skipping_a_level\" data-parsoid='{\"dsr\":[1010,1038,5,5,1,1]}'>Skipping a level</h5>\n\n<h6 id=\"Skipping_a_level_2\" data-parsoid='{\"dsr\":[1040,1070,6,6,1,1]}'>Skipping a level</h6>\n\n<h2 id=\"Headline_2\" data-parsoid='{\"dsr\":[1072,1088,2,2,1,1]}'>Headline 2</h2>\n<p data-parsoid='{\"dsr\":[1089,1098,0,0]}'>Some text</p>\n\n<h3 id=\"Another_headline\" data-parsoid='{\"dsr\":[1100,1124,3,3,1,1]}'>Another headline</h3>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\">\n== Contents ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#Headline_1|<span class=\"tocnumber\">1</span> <span class=\"toctext\">Headline 1</span>]]\n** [[#Subheadline_1|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">Subheadline 1</span>]]\n*** [[#Skipping_a_level|<span class=\"tocnumber\">1.1.1</span> <span class=\"toctext\">Skipping a level</span>]]\n**** [[#Skipping_a_level_2|<span class=\"tocnumber\">1.1.1.1</span> <span class=\"toctext\">Skipping a level</span>]]\n* [[#Headline_2|<span class=\"tocnumber\">2</span> <span class=\"toctext\">Headline 2</span>]]\n** [[#Another_headline|<span class=\"tocnumber\">2.1</span> <span class=\"toctext\">Another headline</span>]]\n\n</div>\n\n== Headline 1 ==\n\n=== Subheadline 1 ===\n\n===== Skipping a level =====\n\n====== Skipping a level ======\n\n== Headline 2 ==\nSome text\n\n=== Another headline ===\n"
    },
    "Section headings with TOC and language conversion (T295187, T306862)": {
        "wt2html": "<h2 id=\"Headline_1\" data-parsoid='{\"dsr\":[0,14,2,2]}'>Headline 1</h2>\n<h3 id=\"Subheadline_1\" data-parsoid='{\"dsr\":[15,34,3,3]}'>Subheadline 1</h3>\n<h2 id=\"Headline_2\" data-parsoid='{\"dsr\":[35,49,2,2]}'>Headline 2</h2>\n<p data-parsoid='{\"dsr\":[50,59,0,0]}'>Some text</p>\n<h3 id=\"Another_headline\" data-parsoid='{\"dsr\":[60,82,3,3]}'>Another headline</h3>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,768,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en-x-piglatin\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,360,53,6]}'>\n<h2 id=\"Ontentscay\" data-parsoid='{\"dsr\":[240,256,2,2,1,1]}'>Ontentscay</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[257,354,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[362,760,0,0]}'><li data-parsoid='{\"dsr\":[362,556,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Headline_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Headline_1\"},\"sa\":{\"href\":\"#Headline_1\"},\"dsr\":[364,454,14,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[378,410,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[411,452,22,7]}'>Eadlinehay 1</span></a>\n<ul data-parsoid='{\"dsr\":[455,556,0,0]}'><li data-parsoid='{\"dsr\":[455,556,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Subheadline_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Subheadline_1\"},\"sa\":{\"href\":\"#Subheadline_1\"},\"dsr\":[458,556,17,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[475,509,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[510,554,22,7]}'>Ubheadlinesay 1</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[557,760,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Headline_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Headline_2\"},\"sa\":{\"href\":\"#Headline_2\"},\"dsr\":[559,649,14,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[573,605,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[606,647,22,7]}'>Eadlinehay 2</span></a>\n<ul data-parsoid='{\"dsr\":[650,760,0,0]}'><li data-parsoid='{\"dsr\":[650,760,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Another_headline\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Another_headline\"},\"sa\":{\"href\":\"#Another_headline\"},\"dsr\":[653,760,20,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[673,707,24,7]}'>2.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[708,758,22,7]}'>Anotherway eadlinehay</span></a></li></ul></li></ul>\n\n</div>\n\n<h2 id=\"Eadlinehay_1\" data-parsoid='{\"dsr\":[770,788,2,2,1,1]}'>Eadlinehay 1</h2>\n\n<h3 id=\"Ubheadlinesay_1\" data-parsoid='{\"dsr\":[790,813,3,3,1,1]}'>Ubheadlinesay 1</h3>\n\n<h2 id=\"Eadlinehay_2\" data-parsoid='{\"dsr\":[815,833,2,2,1,1]}'>Eadlinehay 2</h2>\n<p data-parsoid='{\"dsr\":[834,847,0,0]}'>Omesay exttay</p>\n\n<h3 id=\"Anotherway_eadlinehay\" data-parsoid='{\"dsr\":[849,878,3,3,1,1]}'>Anotherway eadlinehay</h3>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en-x-piglatin\" dir=\"ltr\">\n== Ontentscay ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#Headline_1|<span class=\"tocnumber\">1</span> <span class=\"toctext\">Eadlinehay 1</span>]]\n** [[#Subheadline_1|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">Ubheadlinesay 1</span>]]\n* [[#Headline_2|<span class=\"tocnumber\">2</span> <span class=\"toctext\">Eadlinehay 2</span>]]\n** [[#Another_headline|<span class=\"tocnumber\">2.1</span> <span class=\"toctext\">Anotherway eadlinehay</span>]]\n\n</div>\n\n== Eadlinehay 1 ==\n\n=== Ubheadlinesay 1 ===\n\n== Eadlinehay 2 ==\nOmesay exttay\n\n=== Anotherway eadlinehay ===\n"
    },
    "Section headings with TOC and language conversion disabled (T295187)": {
        "wt2html": "<h2 id=\"Headline_1\" data-parsoid='{\"dsr\":[0,14,2,2]}'>Headline 1</h2>\n<h3 id=\"Subheadline_1\" data-parsoid='{\"dsr\":[15,34,3,3]}'>Subheadline 1</h3>\n<h2 id=\"Headline_2\" data-parsoid='{\"dsr\":[35,49,2,2]}'>Headline 2</h2>\n<p data-parsoid='{\"dsr\":[50,59,0,0]}'>Some text</p>\n<h3 id=\"Another_headline\" data-parsoid='{\"dsr\":[60,82,3,3]}'>Another headline</h3>\n<meta property=\"mw:PageProp/nocontentconvert\" data-parsoid='{\"src\":\"__NOCONTENTCONVERT__\",\"magicSrc\":\"__NOCONTENTCONVERT__\",\"dsr\":[83,103,null,null]}'/>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,757,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en-x-piglatin\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,360,53,6]}'>\n<h2 id=\"Ontentscay\" data-parsoid='{\"dsr\":[240,256,2,2,1,1]}'>Ontentscay</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[257,354,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[362,749,0,0]}'><li data-parsoid='{\"dsr\":[362,552,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Headline_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Headline_1\"},\"sa\":{\"href\":\"#Headline_1\"},\"dsr\":[364,452,14,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[378,410,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[411,450,22,7]}'>Headline 1</span></a>\n<ul data-parsoid='{\"dsr\":[453,552,0,0]}'><li data-parsoid='{\"dsr\":[453,552,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Subheadline_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Subheadline_1\"},\"sa\":{\"href\":\"#Subheadline_1\"},\"dsr\":[456,552,17,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[473,507,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[508,550,22,7]}'>Subheadline 1</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[553,749,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Headline_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Headline_2\"},\"sa\":{\"href\":\"#Headline_2\"},\"dsr\":[555,643,14,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[569,601,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[602,641,22,7]}'>Headline 2</span></a>\n<ul data-parsoid='{\"dsr\":[644,749,0,0]}'><li data-parsoid='{\"dsr\":[644,749,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Another_headline\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Another_headline\"},\"sa\":{\"href\":\"#Another_headline\"},\"dsr\":[647,749,20,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[667,701,24,7]}'>2.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[702,747,22,7]}'>Another headline</span></a></li></ul></li></ul>\n\n</div>\n\n<h2 id=\"Headline_1\" data-parsoid='{\"dsr\":[759,775,2,2,1,1]}'>Headline 1</h2>\n\n<h3 id=\"Subheadline_1\" data-parsoid='{\"dsr\":[777,798,3,3,1,1]}'>Subheadline 1</h3>\n\n<h2 id=\"Headline_2\" data-parsoid='{\"dsr\":[800,816,2,2,1,1]}'>Headline 2</h2>\n<p data-parsoid='{\"dsr\":[817,826,0,0]}'>Some text</p>\n\n<h3 id=\"Another_headline\" data-parsoid='{\"dsr\":[828,852,3,3,1,1]}'>Another headline</h3>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en-x-piglatin\" dir=\"ltr\">\n== Ontentscay ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#Headline_1|<span class=\"tocnumber\">1</span> <span class=\"toctext\">Headline 1</span>]]\n** [[#Subheadline_1|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">Subheadline 1</span>]]\n* [[#Headline_2|<span class=\"tocnumber\">2</span> <span class=\"toctext\">Headline 2</span>]]\n** [[#Another_headline|<span class=\"tocnumber\">2.1</span> <span class=\"toctext\">Another headline</span>]]\n\n</div>\n\n== Headline 1 ==\n\n=== Subheadline 1 ===\n\n== Headline 2 ==\nSome text\n\n=== Another headline ===\n"
    },
    "Section headings with TOC, language conversion rules, and displaytitle\n(T306862, T331316, T26072)": {
        "metadata": "Sections:\n h2 index:1 toclevel:1 number:1 title:Parser_test off:192 anchor/linkAnchor:Foo line:Foo\n h2 index:2 toclevel:1 number:2 title:Parser_test off:209 anchor/linkAnchor:Bar line:Bar\n h2 index:3 toclevel:1 number:3 title:Parser_test off:226 anchor/linkAnchor:-{Foo_Bar}- line:-{Foo Bar}-"
    },
    "T307691: show-toc flag: \"enough\" sections": {
        "wt2wt": "==One==\n===Two===\n==Three==\n===Four===\n",
        "html2wt": "== One ==\n\n=== Two ===\n\n== Three ==\n\n=== Four ===\n",
        "selser [2,0,0,0,4,0,0]": "5vom91\n\n== One ==\n=== Two ===\nol52s0\n\n=== Four ===",
        "selser [4,0,0,4,2,2,0]": "ejaamj\n\n=== Two ===\n12zxjwa\n\neizrgb\n\n== Three ==\n1g6p5kx\n\n=== Four ===",
        "selser [2,3,[4],3,0,2,[4]]": "1nmszl\n\n== One ==\n=== d1trb2 ===\n== Three ==\n149fx90\n\n=== o6gfp7 ===",
        "selser [3,2,0,0,0,4,[4]]": "88e03p\n\n=== Two ===\n== Three ==\ny7e9yp\n\n=== fcdjvh ===",
        "selser [0,0,[4],0,[2],2,[2]]": "== One ==\n=== 11ln2hw ===\n== 1vephgvThree ==\nibq8cn\n\n=== l0idmrFour ===",
        "selser [[3],2,0,2,[3],4,1]": "10czgn3\n\n=== Two ===\n19o7e17\nu31rjc\n\n=== Four ===",
        "selser [3,0,[3],0,2,0,0]": "\nxaa6al\n\n== Three ==\n=== Four ===",
        "selser [[3],3,2,0,4,4,2]": "14ez10z\n\n=== Two ===\nskaii\n\n1yupyqj\n\n1ruvq7l\n\n=== Four ===",
        "selser [3,3,[2],0,0,2,1]": "=== 1df3fvwTwo ===\n== Three ==\n1d9cjup\n\n=== Four ===",
        "selser [3,0,0,0,4,0,2]": "\n=== Two ===\n1lbwvxo\n\n1hj9rlt\n\n=== Four ===",
        "selser [3,0,2,2,1,3,1]": "\n15w2p8g\n\n=== Two ===\n1xa1imd\n\n== Three ==\n=== Four ===",
        "selser [0,0,0,0,[4],0,1]": "== One ==\n=== Two ===\n== j5lon7 ==\n=== Four ===",
        "selser [3,3,[3],2,1,4,2]": "q8wu7e\n\n== Three ==\n1wummoo\n\n1uaur9b\n\n=== Four ===",
        "selser [[2],0,[2],2,1,0,[3]]": "== 19mz290One ==\n=== 1laqxy4Two ===\nzkrp1q\n\n== Three ==\n",
        "selser [0,3,2,4,2,0,0]": "== One ==\n1j43wp5\n\n=== Two ===\noglf3d\n\n1vip3km\n\n== Three ==\n=== Four ===",
        "selser [1,3,2,3,4,4,0]": "== One ==\n180639t\n\n=== Two ===\nr4x09w\n\n2t9fvb\n\n=== Four ===",
        "selser [4,0,0,0,0,4,[2]]": "a6vdk0\n\n=== Two ===\n== Three ==\n1746fyz\n\n=== 1poz04Four ===",
        "selser [0,4,4,0,[4],0,4]": "== One ==\nnylvpw\n\n1l5k5h8\n\n== zfc0uy ==\nyy5iu7",
        "selser [1,2,[3],0,4,3,3]": "== One ==\n1ectzfe\n\n1hf8uyu",
        "selser [4,4,0,0,[4],0,3]": "xcv9yc\n\ny5d2gh\n\n=== Two ===\n== 1edhywf ==\n",
        "metadata": "flags="
    },
    "T307691: show-toc flag: \"enough\" sections and __FORCETOC__": {
        "wt2wt": "__FORCETOC__\n==One==\n===Two===\n==Three==\n===Four===\n",
        "html2wt": "__FORCETOC__\n\n== One ==\n\n=== Two ===\n\n== Three ==\n\n=== Four ===\n",
        "selser [2,3,3,3,1,3,2,3,2]": "86g9ex\n\n__FORCETOC__\n=== Two ===\n18nh7jg\n\n== Three ==\nrd5jma\n\n=== Four ===",
        "selser [0,2,4,4,1,4,0,0,2]": "__FORCETOC__\n\n2ul6t4\n\n1edv2xg\n\nkxe604\n\n=== Two ===\n7cobdi\n\n== Three ==\n15ju2lc\n\n=== Four ===",
        "selser [1,2,3,0,[3],4,0,3,3]": "__FORCETOC__\n\n12d09zc\n\n6zpfkh\n\n== Three ==\n",
        "selser [0,2,4,3,1,3,[3],0,1]": "__FORCETOC__\n\n1dwt5dn\n\ns021q8\n\n=== Two ===\n=== Four ===",
        "selser [4,4,1,2,4,3,0,3,4]": "eeru9j\n\nzxsn0g\n\n== One ==\n12xgyvj\n1e9jllg\n\n== Three ==\n1v1obr8",
        "selser [1,4,[2],4,0,0,0,0,0]": "__FORCETOC__\n\n1x97k80\n\n== wgqju5One ==\n7di704\n\n=== Two ===\n== Three ==\n=== Four ===",
        "selser [3,0,1,3,4,0,0,4,2]": "\n== One ==\n1gd2hms\n\n== Three ==\n1b5mjan\n\nouvmnb\n\n=== Four ===",
        "selser [0,0,4,3,2,0,[3],2,0]": "__FORCETOC__\n\n1n86w4v\n\nlqvgt2\n\n=== Two ===\n1r5ho29\n\n=== Four ===",
        "selser [4,3,4,0,[2],4,4,0,[4]]": "zxy09y\n\ngq1jkx\n\n=== 19ugt23Two ===\n1cqx0y9\n\nvyfdz1\n\n=== 1m5okz5 ===",
        "selser [1,0,[2],2,0,0,3,4,4]": "__FORCETOC__\n== 1dgqwg8One ==\n1idu0mz\n\n=== Two ===\n8dfu6d\n\napf6vm",
        "selser [0,0,[4],0,0,3,[4],0,[2]]": "__FORCETOC__\n== 1a2hb5g ==\n=== Two ===\n== 1u1c671 ==\n=== 3bnkivFour ===",
        "selser [2,2,[2],0,1,0,2,0,3]": "18gz5c5\n\n__FORCETOC__\n\n1aeqqz0\n\n== 1v29xs6One ==\n=== Two ===\n6wrlz5\n\n== Three ==\n",
        "selser [0,0,[3],0,3,0,2,4,0]": "__FORCETOC__\n\nanf88q\n\n== Three ==\n1ei59qu\n\n=== Four ===",
        "selser [3,3,[3],0,[2],3,[4],0,[4]]": "\n=== agk8neTwo ===\n== 1j2fgq6 ==\n=== l5517k ===",
        "selser [0,0,2,2,2,0,4,4,3]": "__FORCETOC__\n\npeg53t\n\n== One ==\nempa8i\n1g0vdhg\n\n=== Two ===\ny01rbd\n\nfdkw1g",
        "selser [3,0,0,3,0,0,4,0,3]": "\n== One ==\n=== Two ===\nslznql\n",
        "selser [0,3,2,2,3,3,0,4,4]": "__FORCETOC__\n\n3tl3q4\n\n== One ==\nkzbn54\n\n== Three ==\n152lr8f\n\nihjbtx",
        "selser [0,4,0,0,[4],0,[4],0,0]": "__FORCETOC__\n\n15oiwfy\n\n== One ==\n=== 1vj8nv0 ===\n== wtxvw9 ==\n=== Four ===",
        "selser [2,3,[3],0,3,0,2,0,3]": "jal8i1\n\n__FORCETOC__\n\n1gm6r3r\n\n== Three ==\n",
        "metadata": "flags="
    },
    "T307691: show-toc flag: \"enough\" sections and __NOTOC__": {
        "wt2wt": "__NOTOC__\n==One==\n===Two===\n==Three==\n===Four===\n",
        "html2wt": "__NOTOC__\n\n== One ==\n\n=== Two ===\n\n== Three ==\n\n=== Four ===\n",
        "selser [3,2,[3],0,0,4,0,0,0]": "r353il\n\n=== Two ===\n179veeb\n\n== Three ==\n=== Four ===",
        "selser [0,4,0,4,4,3,2,3,0]": "__NOTOC__\n\n1hxxl37\n\n== One ==\n1e7o80n\n\n1tqd7a1\n\n3auy5q\n\n== Three ==\n=== Four ===",
        "selser [0,3,[3],4,0,4,0,3,0]": "__NOTOC__\n\n3azs5o\n\n=== Two ===\n1l2dc9o\n\n== Three ==\n=== Four ===",
        "selser [0,0,1,0,2,3,2,2,3]": "__NOTOC__\n== One ==\n19i85mp\n\n=== Two ===\nre5483\n\n== Three ==\na86490\n",
        "selser [0,0,[4],0,0,0,4,0,1]": "__NOTOC__\n== ekx8aw ==\n=== Two ===\n17zzzx2\n\n=== Four ===",
        "selser [4,0,4,3,[4],0,0,3,2]": "nvtx0y\n\n1vydxv0\n\n=== 1wx3nrx ===\n== Three ==\nct1mew\n\n=== Four ===",
        "selser [0,4,0,0,[3],2,[4],4,2]": "__NOTOC__\n\n1p9334h\n\n== One ==\n1as256o\n\n== bmliyw ==\n1rqs7yh\n\n16nq3u3\n\n=== Four ===",
        "selser [1,0,3,4,[3],0,0,0,0]": "__NOTOC__\n\n183vu9z\n\n== Three ==\n=== Four ===",
        "selser [1,2,[2],0,0,0,[3],4,1]": "__NOTOC__\n\nt858jh\n\n== mq08eyOne ==\n=== Two ===\n54fo88\n\n=== Four ===",
        "selser [0,0,0,2,0,3,1,4,1]": "__NOTOC__\n== One ==\n1nicffj\n\n=== Two ===\n== Three ==\neytdl3\n\n=== Four ===",
        "selser [4,0,3,0,[2],0,1,0,1]": "1jokzn9\n\n=== z4wddsTwo ===\n== Three ==\n=== Four ===",
        "selser [0,0,4,0,4,2,2,2,4]": "__NOTOC__\n\n1yd4dd9\n\nthkw7c\n\n1p8mabu\n\n1uatty6\n\n== Three ==\n1t7gzuu\ncvqfo9",
        "selser [4,4,1,2,4,3,0,4,4]": "1ya6mlj\n\npi7yx9\n\n== One ==\nkxdu3x\n1ch1p13\n\n== Three ==\nzfjnux\n\n5iybzb",
        "selser [4,0,2,0,[2],0,[4],0,0]": "hqzx5l\n\nf6ep8k\n\n== One ==\n=== kizuy1Two ===\n== uhpltw ==\n=== Four ===",
        "selser [0,0,[3],4,4,3,[4],0,2]": "__NOTOC__\n\n18i9t3r\n\nk2zebk\n\n== 16e481z ==\nk64hus\n\n=== Four ===",
        "selser [2,2,4,0,0,0,3,0,[2]]": "19sex6l\n\n__NOTOC__\n\n167b4ze\n\n1ra57rd\n\n=== Two ===\n\n=== 2y4rihFour ===",
        "selser [2,3,[3],0,4,4,0,0,4]": "2fkspx\n\n__NOTOC__\n\n1djj5rd\n\n3kwmml\n\n== Three ==\n1p7o5vk",
        "selser [3,0,0,4,4,0,0,3,0]": "\n== One ==\n1imwt29\n\n1o1yu69\n\n== Three ==\n=== Four ===",
        "selser [0,0,3,2,0,4,1,4,[2]]": "__NOTOC__\n\nbf2cay\n\n=== Two ===\n15zh2po\n\n== Three ==\nyrq998\n\n=== f7qrgyFour ===",
        "selser [2,4,[4],0,2,0,[2],0,0]": "iehmnc\n\n__NOTOC__\n\ne5zwux\n\n== 34f26i ==\n50dlsg\n\n=== Two ===\n== gniq93Three ==\n=== Four ==="
    },
    "T307691: show-toc flag: not \"enough\" sections": {
        "wt2wt": "==One==\n",
        "selser [[2]]": "== ylch3cOne ==",
        "selser [[4]]": "== 1t9ebtc ==",
        "selser [1]": "== One ==",
        "selser [2]": "1h3jyh3\n\n== One =="
    },
    "T307691: show-toc flag: not \"enough\" sections, and __NOTOC__": {
        "wt2wt": "__NOTOC__\n==One==\n",
        "html2wt": "__NOTOC__\n\n== One ==\n",
        "selser [0,4,[4]]": "__NOTOC__\n\n8itm3v\n\n== 1h2befa ==",
        "selser [1,2,0]": "__NOTOC__\n\nptyyji\n\n== One ==",
        "selser [3,0,2]": "\nvo3ast\n\n== One ==",
        "selser [0,4,0]": "__NOTOC__\n\ncxh6lh\n\n== One ==",
        "selser [0,3,[4]]": "__NOTOC__\n== 3wcay7 ==",
        "selser [3,0,[4]]": "\n== a47uh1 ==",
        "selser [0,3,0]": "__NOTOC__\n== One ==",
        "selser [1,4,0]": "__NOTOC__\n\n11odhte\n\n== One ==",
        "selser [3,3,0]": "== One ==",
        "selser [0,0,[4]]": "__NOTOC__\n== 5uvfml ==",
        "selser [3,0,1]": "\n== One ==",
        "selser [1,0,0]": "__NOTOC__\n== One ==",
        "selser [0,2,[2]]": "__NOTOC__\n\nv12ddb\n\n== 1cn3k99One ==",
        "selser [0,0,[2]]": "__NOTOC__\n== 92ajviOne ==",
        "selser [2,0,0]": "8scxmr\n\n__NOTOC__\n== One =="
    },
    "T307691: show-toc flag: not \"enough\" sections, but __FORCETOC__": {
        "wt2wt": "__FORCETOC__\n==One==\n",
        "html2wt": "__FORCETOC__\n\n== One ==\n",
        "selser [2,2,[2]]": "15jk68p\n\n__FORCETOC__\n\n1t98zkc\n\n== zf33ekOne ==",
        "selser [0,2,1]": "__FORCETOC__\n\n1pckeoj\n\n== One ==",
        "selser [2,4,[4]]": "150qhq8\n\n__FORCETOC__\n\nfeouap\n\n== 1w1q012 ==",
        "selser [3,3,0]": "== One ==",
        "selser [0,4,[4]]": "__FORCETOC__\n\n1xellyr\n\n== 1qofnpo ==",
        "selser [2,0,0]": "79m4qv\n\n__FORCETOC__\n== One ==",
        "selser [4,3,0]": "1xzmnxk\n\n== One ==",
        "metadata": "flags="
    },
    "T307691: show-toc flag: not \"enough\" sections, but __TOC__": {
        "wt2wt": "==One==\n__TOC__",
        "selser [0,0,4]": "== One ==\n7l8haf",
        "selser [[2],2,0]": "== 1djhbd0One ==\ny6x4js\n__TOC__",
        "selser [0,2,1]": "== One ==\nb67ojm\n__TOC__",
        "selser [[2],4,0]": "== zyou9gOne ==\n9749cj\n__TOC__",
        "selser [2,0,0]": "80hd0x\n\n== One ==\n__TOC__",
        "selser [0,0,1]": "== One ==\n__TOC__",
        "selser [0,3,3]": "== One ==\n",
        "selser [0,4,4]": "== One ==\n1n5wdow\n\n2es4tm",
        "selser [[4],4,0]": "== snghg0 ==\n1887a41\n__TOC__",
        "selser [2,4,3]": "1s9n47u\n\n== One ==\nj1utzu",
        "selser [[2],0,4]": "== rxq5cdOne ==\n1vo48e6",
        "selser [0,2,0]": "== One ==\nv6u4wg\n__TOC__",
        "selser [[4],4,4]": "== 1xorc7r ==\nng3fix\n\n1jlmmik",
        "metadata": "flags="
    },
    "TOC regression (T11764)": {
        "wt2html": "<h2 id=\"title_1\" data-parsoid='{\"dsr\":[0,11,2,2]}'>title 1</h2>\n<h3 id=\"title_1.1\" data-parsoid='{\"dsr\":[12,27,3,3]}'>title 1.1</h3>\n<h4 id=\"title_1.1.1\" data-parsoid='{\"dsr\":[28,47,4,4]}'>title 1.1.1</h4>\n<h3 id=\"title_1.2\" data-parsoid='{\"dsr\":[48,63,3,3]}'>title 1.2</h3>\n<h2 id=\"title_2\" data-parsoid='{\"dsr\":[64,75,2,2]}'>title 2</h2>\n<h3 id=\"title_2.1\" data-parsoid='{\"dsr\":[76,91,3,3]}'>title 2.1</h3>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,901,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,347,42,6]}'>\n<h2 id=\"Contents\" data-parsoid='{\"dsr\":[229,243,2,2,1,1]}'>Contents</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[244,341,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[349,893,0,0]}'><li data-parsoid='{\"dsr\":[349,716,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1\"},\"sa\":{\"href\":\"#title_1\"},\"dsr\":[351,433,11,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[362,394,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[395,431,22,7]}'>title 1</span></a>\n<ul data-parsoid='{\"dsr\":[434,716,0,0]}'><li data-parsoid='{\"dsr\":[434,624,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1.1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1.1\"},\"sa\":{\"href\":\"#title_1.1\"},\"dsr\":[437,525,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[450,484,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[485,523,22,7]}'>title 1.1</span></a>\n<ul data-parsoid='{\"dsr\":[526,624,0,0]}'><li data-parsoid='{\"dsr\":[526,624,3,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1.1.1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1.1.1\"},\"sa\":{\"href\":\"#title_1.1.1\"},\"dsr\":[530,624,15,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[545,581,24,7]}'>1.1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[582,622,22,7]}'>title 1.1.1</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[625,716,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1.2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1.2\"},\"sa\":{\"href\":\"#title_1.2\"},\"dsr\":[628,716,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[641,675,24,7]}'>1.2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[676,714,22,7]}'>title 1.2</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[717,893,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_2\"},\"sa\":{\"href\":\"#title_2\"},\"dsr\":[719,801,11,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[730,762,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[763,799,22,7]}'>title 2</span></a>\n<ul data-parsoid='{\"dsr\":[802,893,0,0]}'><li data-parsoid='{\"dsr\":[802,893,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_2.1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_2.1\"},\"sa\":{\"href\":\"#title_2.1\"},\"dsr\":[805,893,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[818,852,24,7]}'>2.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[853,891,22,7]}'>title 2.1</span></a></li></ul></li></ul>\n\n</div>\n\n<h2 id=\"title_1\" data-parsoid='{\"dsr\":[903,916,2,2,1,1]}'>title 1</h2>\n\n<h3 id=\"title_1.1\" data-parsoid='{\"dsr\":[918,935,3,3,1,1]}'>title 1.1</h3>\n\n<h4 id=\"title_1.1.1\" data-parsoid='{\"dsr\":[937,958,4,4,1,1]}'>title 1.1.1</h4>\n\n<h3 id=\"title_1.2\" data-parsoid='{\"dsr\":[960,977,3,3,1,1]}'>title 1.2</h3>\n\n<h2 id=\"title_2\" data-parsoid='{\"dsr\":[979,992,2,2,1,1]}'>title 2</h2>\n\n<h3 id=\"title_2.1\" data-parsoid='{\"dsr\":[994,1011,3,3,1,1]}'>title 2.1</h3>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\">\n== Contents ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#title_1|<span class=\"tocnumber\">1</span> <span class=\"toctext\">title 1</span>]]\n** [[#title_1.1|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">title 1.1</span>]]\n*** [[#title_1.1.1|<span class=\"tocnumber\">1.1.1</span> <span class=\"toctext\">title 1.1.1</span>]]\n** [[#title_1.2|<span class=\"tocnumber\">1.2</span> <span class=\"toctext\">title 1.2</span>]]\n* [[#title_2|<span class=\"tocnumber\">2</span> <span class=\"toctext\">title 2</span>]]\n** [[#title_2.1|<span class=\"tocnumber\">2.1</span> <span class=\"toctext\">title 2.1</span>]]\n\n</div>\n\n== title 1 ==\n\n=== title 1.1 ===\n\n==== title 1.1.1 ====\n\n=== title 1.2 ===\n\n== title 2 ==\n\n=== title 2.1 ===\n"
    },
    "TOC regression (T14077)": {
        "wt2html": "<meta property=\"mw:PageProp/toc\" data-parsoid='{\"src\":\"__TOC__\",\"magicSrc\":\"__TOC__\",\"dsr\":[0,7,null,null]}'/>\n<h2 id=\"title_1\" data-parsoid='{\"dsr\":[8,19,2,2]}'>title 1</h2>\n<h3 id=\"title_1.1\" data-parsoid='{\"dsr\":[20,35,3,3]}'>title 1.1</h3>\n<h2 id=\"title_2\" data-parsoid='{\"dsr\":[36,47,2,2]}'>title 2</h2>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,618,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,347,42,6]}'>\n<h2 id=\"Contents\" data-parsoid='{\"dsr\":[229,243,2,2,1,1]}'>Contents</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[244,341,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[349,610,0,0]}'><li data-parsoid='{\"dsr\":[349,525,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1\"},\"sa\":{\"href\":\"#title_1\"},\"dsr\":[351,433,11,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[362,394,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[395,431,22,7]}'>title 1</span></a>\n<ul data-parsoid='{\"dsr\":[434,525,0,0]}'><li data-parsoid='{\"dsr\":[434,525,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1.1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1.1\"},\"sa\":{\"href\":\"#title_1.1\"},\"dsr\":[437,525,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[450,484,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[485,523,22,7]}'>title 1.1</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[526,610,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_2\"},\"sa\":{\"href\":\"#title_2\"},\"dsr\":[528,610,11,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[539,571,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[572,608,22,7]}'>title 2</span></a></li></ul>\n\n</div>\n\n<h2 id=\"title_1\" data-parsoid='{\"dsr\":[620,633,2,2,1,1]}'>title 1</h2>\n\n<h3 id=\"title_1.1\" data-parsoid='{\"dsr\":[635,652,3,3,1,1]}'>title 1.1</h3>\n\n<h2 id=\"title_2\" data-parsoid='{\"dsr\":[654,667,2,2,1,1]}'>title 2</h2>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\">\n== Contents ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#title_1|<span class=\"tocnumber\">1</span> <span class=\"toctext\">title 1</span>]]\n** [[#title_1.1|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">title 1.1</span>]]\n* [[#title_2|<span class=\"tocnumber\">2</span> <span class=\"toctext\">title 2</span>]]\n\n</div>\n\n== title 1 ==\n\n=== title 1.1 ===\n\n== title 2 ==\n"
    },
    "TOC with wgMaxTocLevel=3 (T8204)": {
        "wt2html": "<h2 id=\"title_1\" data-parsoid='{\"dsr\":[0,11,2,2]}'>title 1</h2>\n<h3 id=\"title_1.1\" data-parsoid='{\"dsr\":[12,27,3,3]}'>title 1.1</h3>\n<h4 id=\"title_1.1.1\" data-parsoid='{\"dsr\":[28,47,4,4]}'>title 1.1.1</h4>\n<h3 id=\"title_1.2\" data-parsoid='{\"dsr\":[48,63,3,3]}'>title 1.2</h3>\n<h2 id=\"title_2\" data-parsoid='{\"dsr\":[64,75,2,2]}'>title 2</h2>\n<h3 id=\"title_2.1\" data-parsoid='{\"dsr\":[76,91,3,3]}'>title 2.1</h3>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,802,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,347,42,6]}'>\n<h2 id=\"Contents\" data-parsoid='{\"dsr\":[229,243,2,2,1,1]}'>Contents</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[244,341,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[349,794,0,0]}'><li data-parsoid='{\"dsr\":[349,617,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1\"},\"sa\":{\"href\":\"#title_1\"},\"dsr\":[351,433,11,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[362,394,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[395,431,22,7]}'>title 1</span></a>\n<ul data-parsoid='{\"dsr\":[434,617,0,0]}'><li data-parsoid='{\"dsr\":[434,525,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1.1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1.1\"},\"sa\":{\"href\":\"#title_1.1\"},\"dsr\":[437,525,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[450,484,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[485,523,22,7]}'>title 1.1</span></a></li>\n<li data-parsoid='{\"dsr\":[526,617,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_1.2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_1.2\"},\"sa\":{\"href\":\"#title_1.2\"},\"dsr\":[529,617,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[542,576,24,7]}'>1.2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[577,615,22,7]}'>title 1.2</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[618,794,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_2\"},\"sa\":{\"href\":\"#title_2\"},\"dsr\":[620,702,11,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[631,663,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[664,700,22,7]}'>title 2</span></a>\n<ul data-parsoid='{\"dsr\":[703,794,0,0]}'><li data-parsoid='{\"dsr\":[703,794,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#title_2.1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#title_2.1\"},\"sa\":{\"href\":\"#title_2.1\"},\"dsr\":[706,794,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[719,753,24,7]}'>2.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[754,792,22,7]}'>title 2.1</span></a></li></ul></li></ul>\n\n</div>\n\n<h2 id=\"title_1\" data-parsoid='{\"dsr\":[804,817,2,2,1,1]}'>title 1</h2>\n\n<h3 id=\"title_1.1\" data-parsoid='{\"dsr\":[819,836,3,3,1,1]}'>title 1.1</h3>\n\n<h4 id=\"title_1.1.1\" data-parsoid='{\"dsr\":[838,859,4,4,1,1]}'>title 1.1.1</h4>\n\n<h3 id=\"title_1.2\" data-parsoid='{\"dsr\":[861,878,3,3,1,1]}'>title 1.2</h3>\n\n<h2 id=\"title_2\" data-parsoid='{\"dsr\":[880,893,2,2,1,1]}'>title 2</h2>\n\n<h3 id=\"title_2.1\" data-parsoid='{\"dsr\":[895,912,3,3,1,1]}'>title 2.1</h3>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\">\n== Contents ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#title_1|<span class=\"tocnumber\">1</span> <span class=\"toctext\">title 1</span>]]\n** [[#title_1.1|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">title 1.1</span>]]\n** [[#title_1.2|<span class=\"tocnumber\">1.2</span> <span class=\"toctext\">title 1.2</span>]]\n* [[#title_2|<span class=\"tocnumber\">2</span> <span class=\"toctext\">title 2</span>]]\n** [[#title_2.1|<span class=\"tocnumber\">2.1</span> <span class=\"toctext\">title 2.1</span>]]\n\n</div>\n\n== title 1 ==\n\n=== title 1.1 ===\n\n==== title 1.1.1 ====\n\n=== title 1.2 ===\n\n== title 2 ==\n\n=== title 2.1 ===\n"
    },
    "TOC with wgMaxTocLevel=3 and two level four headings (T8204)": {
        "wt2html": "<h2 id=\"Section_1\" data-parsoid='{\"dsr\":[0,13,2,2]}'>Section 1</h2>\n<h3 id=\"Section_1.1\" data-parsoid='{\"dsr\":[14,31,3,3]}'>Section 1.1</h3>\n<h4 id=\"Section_1.1.1\" data-parsoid='{\"dsr\":[32,53,4,4]}'>Section 1.1.1</h4>\n<h4 id=\"Section_1.1.1.1\" data-parsoid='{\"dsr\":[54,77,4,4]}'>Section 1.1.1.1</h4>\n<h2 id=\"Section_2\" data-parsoid='{\"dsr\":[78,91,2,2]}'>Section 2</h2>",
        "html2html": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,630,77,6]}'>&lt;input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[186,347,42,6]}'>\n<h2 id=\"Contents\" data-parsoid='{\"dsr\":[229,243,2,2,1,1]}'>Contents</h2>\n<span class=\"toctogglespan\" data-parsoid='{\"stx\":\"html\",\"dsr\":[244,341,28,7]}'>&lt;label class=\"toctogglelabel\" for=\"toctogglecheckbox\">&lt;/label></span></div>\n\n<ul data-parsoid='{\"dsr\":[349,622,0,0]}'><li data-parsoid='{\"dsr\":[349,533,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Section_1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Section_1\"},\"sa\":{\"href\":\"#Section_1\"},\"dsr\":[351,437,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[364,396,24,7]}'>1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[397,435,22,7]}'>Section 1</span></a>\n<ul data-parsoid='{\"dsr\":[438,533,0,0]}'><li data-parsoid='{\"dsr\":[438,533,2,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Section_1.1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Section_1.1\"},\"sa\":{\"href\":\"#Section_1.1\"},\"dsr\":[441,533,15,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[456,490,24,7]}'>1.1</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[491,531,22,7]}'>Section 1.1</span></a></li></ul></li>\n<li data-parsoid='{\"dsr\":[534,622,1,0,1,0]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#Section_2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#Section_2\"},\"sa\":{\"href\":\"#Section_2\"},\"dsr\":[536,622,13,2]}'><span class=\"tocnumber\" data-parsoid='{\"stx\":\"html\",\"dsr\":[549,581,24,7]}'>2</span> <span class=\"toctext\" data-parsoid='{\"stx\":\"html\",\"dsr\":[582,620,22,7]}'>Section 2</span></a></li></ul>\n\n</div>\n\n<h2 id=\"Section_1\" data-parsoid='{\"dsr\":[632,647,2,2,1,1]}'>Section 1</h2>\n\n<h3 id=\"Section_1.1\" data-parsoid='{\"dsr\":[649,668,3,3,1,1]}'>Section 1.1</h3>\n\n<h4 id=\"Section_1.1.1\" data-parsoid='{\"dsr\":[670,693,4,4,1,1]}'>Section 1.1.1</h4>\n\n<h4 id=\"Section_1.1.1.1\" data-parsoid='{\"dsr\":[695,720,4,4,1,1]}'>Section 1.1.1.1</h4>\n\n<h2 id=\"Section_2\" data-parsoid='{\"dsr\":[722,737,2,2,1,1]}'>Section 2</h2>\n",
        "html2wt": "<div id=\"toc\" class=\"toc\" role=\"navigation\" aria-labelledby=\"mw-toc-heading\"><input type=\"checkbox\" role=\"button\" id=\"toctogglecheckbox\" class=\"toctogglecheckbox\" style=\"display:none\" /><div class=\"toctitle\" lang=\"en\" dir=\"ltr\">\n== Contents ==\n<span class=\"toctogglespan\"><label class=\"toctogglelabel\" for=\"toctogglecheckbox\"></label></span></div>\n\n* [[#Section_1|<span class=\"tocnumber\">1</span> <span class=\"toctext\">Section 1</span>]]\n** [[#Section_1.1|<span class=\"tocnumber\">1.1</span> <span class=\"toctext\">Section 1.1</span>]]\n* [[#Section_2|<span class=\"tocnumber\">2</span> <span class=\"toctext\">Section 2</span>]]\n\n</div>\n\n== Section 1 ==\n\n=== Section 1.1 ===\n\n==== Section 1.1.1 ====\n\n==== Section 1.1.1.1 ====\n\n== Section 2 ==\n"
    },
    "__FORCETOC__ override": {
        "metadata": "flags="
    },
    "__NOEDITSECTION__ keyword": {
        "html2wt": "== Section 1 ==\n\n== Section 2 ==\n"
    },
    "span tags with directionality in TOC": {
        "html2wt": "__TOC__\n==<span dir=\"ltr\">C++</span>==\n\n== <span dir=\"rtl\">!</span> ==\n\n== <span style=\"font-style: italic\">The attributes on these span tags must be deleted from the TOC</span> ==\n\n== <span style=\"font-style: italic\" dir=\"ltr\">All attributes on these span tags must be deleted from the TOC</span> ==\n\n== <span dir=\"ltr\" style=\"font-style: italic\">Attributes after dir on these span tags must be deleted from the TOC</span> ==\n",
        "selser [0,3,4,2,[0,[3]],0,[[3]],3,0,3,3]": "__TOC__\n\n1jvuudn\n\n1scw8a8\n\n==<span dir=\"rtl\"></span>==\n\n==<span style=\"font-style: italic\"></span>==\n\n==<span style=\"font-style: italic\" dir=\"ltr\">All attributes on these span tags must be deleted from the TOC</span>==\n"
    }
}
