{
    "Simple <ref>, no <references/>": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,58,0,0]}'>Wikipedia rocks!<sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[16,58,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt4\" data-parsoid='{\"dsr\":[58,58,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">Proceeds of Rockology, vol. XXI</span></li></ol>",
        "wt2wt": "Wikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,81,0,0]}'>Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[16,81,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[55,75,15,2]}'>[1]</a></sup></p><div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[81,249,32,6]}'>\n<ol data-parsoid='{\"dsr\":[114,241,0,0]}'><li data-parsoid='{\"dsr\":[114,241,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[116,173,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[147,166,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[174,241,29,7]}'>Proceeds of Rockology, vol. XXI</span></li></ol>\n\n</div>",
        "html2wt": "Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup><div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">Proceeds of Rockology, vol. XXI</span>\n\n</div>"
    },
    "Simple <ref>, with <references/>": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,58,0,0]}'>Wikipedia rocks!<sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[16,58,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"dsr\":[60,74,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">Proceeds of Rockology, vol. XXI</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,81,0,0]}'>Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[16,81,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[55,75,15,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[83,251,32,6]}'>\n<ol data-parsoid='{\"dsr\":[116,243,0,0]}'><li data-parsoid='{\"dsr\":[116,243,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[118,175,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[149,168,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[176,243,29,7]}'>Proceeds of Rockology, vol. XXI</span></li></ol>\n\n</div>",
        "html2wt": "Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">Proceeds of Rockology, vol. XXI</span>\n\n</div>"
    },
    "<ref> with a simple template": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,40,0,0]}'>Templating<sup about=\"#mwt4\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[10,40,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt7\" data-parsoid='{\"dsr\":[42,55,13,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\"><span about=\"#mwt2\" typeof=\"mw:Transclusion\" data-parsoid='{\"pi\":[[]],\"dsr\":[15,34,null,null]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"simple template\",\"href\":\"./Template:Simple_template\"},\"params\":{},\"i\":0}}]}'>A </span><i about=\"#mwt2\" data-parsoid=\"{}\">simple</i><span about=\"#mwt2\" data-parsoid=\"{}\"> template.</span></span></li></ol>",
        "wt2wt": "Templating<ref>{{simple template}}</ref>\n\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,75,0,0]}'>Templating<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[10,75,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[49,69,15,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[77,236,32,6]}'>\n<ol data-parsoid='{\"dsr\":[110,228,0,0]}'><li data-parsoid='{\"dsr\":[110,228,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[112,169,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[143,162,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[170,228,29,7]}'>A <i data-parsoid='{\"dsr\":[201,211,2,2]}'>simple</i> template.</span></li></ol>\n\n</div>",
        "html2wt": "Templating<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">A ''simple'' template.</span>\n\n</div>"
    },
    "<ref> with a <nowiki>": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,57,0,0]}'>Templating<sup about=\"#mwt5\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[10,57,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt8\" data-parsoid='{\"dsr\":[59,73,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">{{simple template}}</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,75,0,0]}'>Templating<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[10,75,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[49,69,15,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[77,250,32,6]}'>\n<ol data-parsoid='{\"dsr\":[110,242,0,0]}'><li data-parsoid='{\"dsr\":[110,242,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[112,169,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[143,162,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[170,242,29,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[199,235,8,9]}'>{{simple template}}</span></span></li></ol>\n\n</div>",
        "html2wt": "Templating<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\"><nowiki>{{simple template}}</nowiki></span>\n\n</div>"
    },
    "<ref> in a <nowiki>": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,57,0,0]}'>Templating<span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[10,57,8,9]}'>&lt;ref>{{simple template}}&lt;/ref></span></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt5\" data-parsoid='{\"dsr\":[59,73,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'></ol>",
        "html2wt": "Templating<nowiki><ref>{{simple template}}</ref></nowiki>\n\n\n"
    },
    "<ref> in a <!--comment-->": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,10,0,0]}'>Templating</p><!--<ref&#x3E;{{simple template}}</ref&#x3E;-->\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt3\" data-parsoid='{\"dsr\":[49,63,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'></ol>",
        "html2wt": "Templating\n\n\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299)": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,30,0,0]}'><span about=\"#mwt2\" typeof=\"mw:Transclusion\" data-parsoid='{\"pi\":[[]],\"dsr\":[0,14,null,null]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"REVISIONID\",\"function\":\"revisionid\"},\"params\":{},\"i\":0}}]}'>Parser function implementation for pf_revisionid missing in Parsoid.</span><sup about=\"#mwt4\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[14,30,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt5\" data-parsoid='{\"dsr\":[30,30,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">elite</span></li></ol>",
        "wt2wt": "{{REVISIONID}}<ref>elite</ref>\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,69,0,0]}'>1337<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[4,69,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[43,63,15,2]}'>[1]</a></sup></p><div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[69,211,32,6]}'>\n<ol data-parsoid='{\"dsr\":[102,203,0,0]}'><li data-parsoid='{\"dsr\":[102,203,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[104,161,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[135,154,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[162,203,29,7]}'>elite</span></li></ol>\n\n</div>",
        "html2wt": "1337<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup><div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">elite</span>\n\n</div>"
    },
    "{{REVISIONID}} on page without <ref> (bug 6299 sanity check)": {
        "wt2html": "<p about=\"#mwt1\" typeof=\"mw:Transclusion\" data-parsoid='{\"dsr\":[0,14,0,0],\"pi\":[[]]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"REVISIONID\",\"function\":\"revisionid\"},\"params\":{},\"i\":0}}]}'>Parser function implementation for pf_revisionid missing in Parsoid.</p>",
        "html2wt": "1337\n"
    },
    "Ref with content followed by blank ref": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,31,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-blank_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,31,18,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"},\"body\":{\"id\":\"mw-reference-text-cite_note-blank-1\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[33,53,0,0]}'><sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-blank_1-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[33,53,20,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[55,69,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-blank-1\" id=\"cite_note-blank-1\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">1 </span></a><a href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">2 </span></a></span> <span id=\"mw-reference-text-cite_note-blank-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">content</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,79,0,0]}'><sup id=\"cite_ref-blank_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,79,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[47,73,21,2]}'>[1]</a></sup></p>\n\n<p data-parsoid='{\"dsr\":[81,160,0,0]}'><sup id=\"cite_ref-blank_1-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[81,160,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[128,154,21,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[162,368,32,6]}'>\n<ol data-parsoid='{\"dsr\":[195,360,0,0]}'><li data-parsoid='{\"dsr\":[195,360,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[197,316,31,7]}'>↑ <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[232,270,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-0\"},\"sa\":{\"href\":\"#cite_ref-blank_1-0\"},\"dsr\":[237,264,22,2]}'>1.0</a></sup> <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[271,309,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-1\"},\"sa\":{\"href\":\"#cite_ref-blank_1-1\"},\"dsr\":[276,303,22,2]}'>1.1</a></sup></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[317,360,29,7]}'>content</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-blank_1-0\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<sup id=\"cite_ref-blank_1-1\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">↑ <sup>[[#cite_ref-blank_1-0|1.0]]</sup> <sup>[[#cite_ref-blank_1-1|1.1]]</sup></span> <span class=\"reference-text\">content</span>\n\n</div>"
    },
    "Blank ref followed by ref with content": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,20,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-blank_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,20,20,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[22,53,0,0]}'><sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-blank_1-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[22,53,18,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"},\"body\":{\"id\":\"mw-reference-text-cite_note-blank-1\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[55,69,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-blank-1\" id=\"cite_note-blank-1\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">1 </span></a><a href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">2 </span></a></span> <span id=\"mw-reference-text-cite_note-blank-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">content</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,79,0,0]}'><sup id=\"cite_ref-blank_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,79,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[47,73,21,2]}'>[1]</a></sup></p>\n\n<p data-parsoid='{\"dsr\":[81,160,0,0]}'><sup id=\"cite_ref-blank_1-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[81,160,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[128,154,21,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[162,368,32,6]}'>\n<ol data-parsoid='{\"dsr\":[195,360,0,0]}'><li data-parsoid='{\"dsr\":[195,360,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[197,316,31,7]}'>↑ <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[232,270,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-0\"},\"sa\":{\"href\":\"#cite_ref-blank_1-0\"},\"dsr\":[237,264,22,2]}'>1.0</a></sup> <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[271,309,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-1\"},\"sa\":{\"href\":\"#cite_ref-blank_1-1\"},\"dsr\":[276,303,22,2]}'>1.1</a></sup></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[317,360,29,7]}'>content</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-blank_1-0\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<sup id=\"cite_ref-blank_1-1\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">↑ <sup>[[#cite_ref-blank_1-0|1.0]]</sup> <sup>[[#cite_ref-blank_1-1|1.1]]</sup></span> <span class=\"reference-text\">content</span>\n\n</div>"
    },
    "Regression: non-blank ref \"0\" followed by ref with content": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,25,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-blank_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,25,18,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"},\"body\":{\"id\":\"mw-reference-text-cite_note-blank-1\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[27,58,0,0]}'><sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-blank_1-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[27,58,18,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"},\"body\":{\"html\":\"content\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[60,74,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-blank-1\" id=\"cite_note-blank-1\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">1 </span></a><a href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">2 </span></a></span> <span id=\"mw-reference-text-cite_note-blank-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">0</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,79,0,0]}'><sup id=\"cite_ref-blank_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,79,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[47,73,21,2]}'>[1]</a></sup></p>\n\n<p data-parsoid='{\"dsr\":[81,160,0,0]}'><sup id=\"cite_ref-blank_1-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[81,160,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[128,154,21,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[162,547,32,6]}'>\n<ol data-parsoid='{\"dsr\":[195,539,0,0]}'><li data-parsoid='{\"dsr\":[195,539,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[197,316,31,7]}'>↑ <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[232,270,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-0\"},\"sa\":{\"href\":\"#cite_ref-blank_1-0\"},\"dsr\":[237,264,22,2]}'>1.0</a></sup> <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[271,309,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-1\"},\"sa\":{\"href\":\"#cite_ref-blank_1-1\"},\"dsr\":[276,303,22,2]}'>1.1</a></sup></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[317,539,29,7]}'>0 <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[348,532,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[426,461,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[432,454,8,9]}'>&lt;ref></span></code> tag; name \"blank\" defined multiple times with different content</span></span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-blank_1-0\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<sup id=\"cite_ref-blank_1-1\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">↑ <sup>[[#cite_ref-blank_1-0|1.0]]</sup> <sup>[[#cite_ref-blank_1-1|1.1]]</sup></span> <span class=\"reference-text\">0 <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; name \"blank\" defined multiple times with different content</span></span>\n\n</div>"
    },
    "Regression sanity check: non-blank ref \"1\" followed by ref with content": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,25,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-blank_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,25,18,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"},\"body\":{\"id\":\"mw-reference-text-cite_note-blank-1\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[27,58,0,0]}'><sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-blank_1-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[27,58,18,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blank\"},\"body\":{\"html\":\"content\"}}'><a href=\"./Parser_test#cite_note-blank-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[60,74,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-blank-1\" id=\"cite_note-blank-1\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">1 </span></a><a href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">2 </span></a></span> <span id=\"mw-reference-text-cite_note-blank-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">1</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,79,0,0]}'><sup id=\"cite_ref-blank_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,79,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[47,73,21,2]}'>[1]</a></sup></p>\n\n<p data-parsoid='{\"dsr\":[81,160,0,0]}'><sup id=\"cite_ref-blank_1-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[81,160,47,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blank-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blank-1\"},\"sa\":{\"href\":\"#cite_note-blank-1\"},\"dsr\":[128,154,21,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[162,547,32,6]}'>\n<ol data-parsoid='{\"dsr\":[195,539,0,0]}'><li data-parsoid='{\"dsr\":[195,539,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[197,316,31,7]}'>↑ <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[232,270,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-0\"},\"sa\":{\"href\":\"#cite_ref-blank_1-0\"},\"dsr\":[237,264,22,2]}'>1.0</a></sup> <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[271,309,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blank_1-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blank_1-1\"},\"sa\":{\"href\":\"#cite_ref-blank_1-1\"},\"dsr\":[276,303,22,2]}'>1.1</a></sup></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[317,539,29,7]}'>1 <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[348,532,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[426,461,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[432,454,8,9]}'>&lt;ref></span></code> tag; name \"blank\" defined multiple times with different content</span></span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-blank_1-0\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<sup id=\"cite_ref-blank_1-1\" class=\"reference\">[[#cite_note-blank-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">↑ <sup>[[#cite_ref-blank_1-0|1.0]]</sup> <sup>[[#cite_ref-blank_1-1|1.1]]</sup></span> <span class=\"reference-text\">1 <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; name \"blank\" defined multiple times with different content</span></span>\n\n</div>"
    },
    "Ref names containing a number": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,95,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-test123test_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,33,24,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"test123test\"},\"body\":{\"id\":\"mw-reference-text-cite_note-test123test-1\"}}'><a href=\"./Parser_test#cite_note-test123test-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-123test_2-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[34,63,20,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"123test\"},\"body\":{\"id\":\"mw-reference-text-cite_note-123test-2\"}}'><a href=\"./Parser_test#cite_note-123test-2\" style=\"counter-reset: mw-Ref 2;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[2]</span></a></sup>\n<sup about=\"#mwt9\" class=\"mw-ref\" id=\"cite_ref-test123_3-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[64,95,20,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"test123\"},\"body\":{\"id\":\"mw-reference-text-cite_note-test123-3\"}}'><a href=\"./Parser_test#cite_note-test123-3\" style=\"counter-reset: mw-Ref 3;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[3]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt12\" data-parsoid='{\"dsr\":[97,111,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-test123test-1\" id=\"cite_note-test123test-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-test123test_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-test123test-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">One</span></li><li about=\"#cite_note-123test-2\" id=\"cite_note-123test-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-123test_2-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-123test-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">Two</span></li><li about=\"#cite_note-test123-3\" id=\"cite_note-test123-3\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-test123_3-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-test123-3\" class=\"mw-reference-text\" data-parsoid=\"{}\">Three</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,259,0,0]}'><sup id=\"cite_ref-test123test_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,91,53,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-test123test-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-test123test-1\"},\"sa\":{\"href\":\"#cite_note-test123test-1\"},\"dsr\":[53,85,27,2]}'>[1]</a></sup>\n<sup id=\"cite_ref-123test_2-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[92,175,49,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-123test-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-123test-2\"},\"sa\":{\"href\":\"#cite_note-123test-2\"},\"dsr\":[141,169,23,2]}'>[2]</a></sup>\n<sup id=\"cite_ref-test123_3-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[176,259,49,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-test123-3\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-test123-3\"},\"sa\":{\"href\":\"#cite_note-test123-3\"},\"dsr\":[225,253,23,2]}'>[3]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[261,637,32,6]}'>\n<ol data-parsoid='{\"dsr\":[294,629,0,0]}'><li data-parsoid='{\"dsr\":[294,407,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[296,367,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-test123test_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-test123test_1-0\"},\"sa\":{\"href\":\"#cite_ref-test123test_1-0\"},\"dsr\":[327,360,28,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[368,407,29,7]}'>One</span></li>\n<li data-parsoid='{\"dsr\":[408,517,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[410,477,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-123test_2-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-123test_2-0\"},\"sa\":{\"href\":\"#cite_ref-123test_2-0\"},\"dsr\":[441,470,24,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[478,517,29,7]}'>Two</span></li>\n<li data-parsoid='{\"dsr\":[518,629,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[520,587,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-test123_3-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-test123_3-0\"},\"sa\":{\"href\":\"#cite_ref-test123_3-0\"},\"dsr\":[551,580,24,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[588,629,29,7]}'>Three</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-test123test_1-0\" class=\"reference\">[[#cite_note-test123test-1|[1]]]</sup>\n<sup id=\"cite_ref-123test_2-0\" class=\"reference\">[[#cite_note-123test-2|[2]]]</sup>\n<sup id=\"cite_ref-test123_3-0\" class=\"reference\">[[#cite_note-test123-3|[3]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-test123test_1-0|↑]]</span> <span class=\"reference-text\">One</span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-123test_2-0|↑]]</span> <span class=\"reference-text\">Two</span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-test123_3-0|↑]]</span> <span class=\"reference-text\">Three</span>\n\n</div>"
    },
    "T184912: Consistent normalization of consecutive underscores": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,30,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-x__x_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,30,17,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"x__x\"},\"body\":{\"id\":\"mw-reference-text-cite_note-x__x-1\"}}'><a href=\"./Parser_test#cite_note-x__x-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"dsr\":[31,45,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-x__x-1\" id=\"cite_note-x__x-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-x__x_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-x__x-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">example</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,75,0,0]}'><sup id=\"cite_ref-x_x_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,75,45,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-x_x-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-x_x-1\"},\"sa\":{\"href\":\"#cite_note-x_x-1\"},\"dsr\":[45,69,19,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[77,227,32,6]}'>\n<ol data-parsoid='{\"dsr\":[110,219,0,0]}'><li data-parsoid='{\"dsr\":[110,219,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[112,175,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-x_x_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-x_x_1-0\"},\"sa\":{\"href\":\"#cite_ref-x_x_1-0\"},\"dsr\":[143,168,20,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[176,219,29,7]}'>example</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-x_x_1-0\" class=\"reference\">[[#cite_note-x_x-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-x_x_1-0|↑]]</span> <span class=\"reference-text\">example</span>\n\n</div>"
    },
    "Erroneous refs": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,24,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-0_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,24,14,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"0\"},\"body\":{\"id\":\"mw-reference-text-cite_note-0-1\"}}'><a href=\"./Parser_test#cite_note-0-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[26,77,0,0]}'><sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[26,77,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-2\"}}'><a href=\"./Parser_test#cite_note-2\" style=\"counter-reset: mw-Ref 2;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[2]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[79,86,0,0]}'><sup about=\"#mwt9\" class=\"mw-ref\" id=\"cite_ref-3\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[79,86,7,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{}}'><a href=\"./Parser_test#cite_note-3\" style=\"counter-reset: mw-Ref 3;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[3]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[88,117,0,0]}'><sup about=\"#mwt12\" class=\"mw-ref\" id=\"cite_ref-bar_4-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[88,117,29,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"bar\"}}'><a href=\"./Parser_test#cite_note-bar-4\" style=\"counter-reset: mw-Ref 4;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[4]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[119,154,0,0]}'><sup about=\"#mwt15\" class=\"mw-ref\" id=\"cite_ref-blankwithnoreference_5-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[119,154,35,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"blankwithnoreference\"}}'><a href=\"./Parser_test#cite_note-blankwithnoreference-5\" style=\"counter-reset: mw-Ref 5;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[5]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt18\" data-parsoid='{\"dsr\":[156,184,28,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"name\":\"quasit\"}}'><li about=\"#cite_note-0-1\" id=\"cite_note-0-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-0_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-0-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">Zero</span></li><li about=\"#cite_note-2\" id=\"cite_note-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-2\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">Also zero, but differently! (Normal ref)</span></li><li about=\"#cite_note-3\" id=\"cite_note-3\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-3\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-3\" class=\"mw-reference-text\" data-parsoid=\"{}\"></span></li><li about=\"#cite_note-bar-4\" id=\"cite_note-bar-4\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-bar_4-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-bar-4\" class=\"mw-reference-text\" data-parsoid=\"{}\"></span></li><li about=\"#cite_note-blankwithnoreference-5\" id=\"cite_note-blankwithnoreference-5\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-blankwithnoreference_5-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-blankwithnoreference-5\" class=\"mw-reference-text\" data-parsoid=\"{}\"></span></li></ol>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt21\" data-parsoid='{\"dsr\":[186,200,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'></ol>",
        "wt2wt": "<ref name=\"0\">Zero</ref>\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\n<ref name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" />\n\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,182,0,0]}'><span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,182,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[78,113,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[84,106,8,9]}'>&lt;ref></span></code> tag;\nname cannot be a simple integer. Use a descriptive title</span></p>\n\n<p data-parsoid='{\"dsr\":[184,249,0,0]}'><sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[184,249,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[223,243,15,2]}'>[1]</a></sup></p>\n\n<p data-parsoid='{\"dsr\":[251,410,0,0]}'><span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[251,410,58,7]}'>Cite error: The opening <code data-parsoid='{\"stx\":\"html\",\"dsr\":[333,368,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[339,361,8,9]}'>&lt;ref></span></code> tag is malformed or has a bad name</span></p>\n\n<p data-parsoid='{\"dsr\":[412,487,0,0]}'><sup id=\"cite_ref-bar_2-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[412,487,45,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-bar-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-bar-2\"},\"sa\":{\"href\":\"#cite_note-bar-2\"},\"dsr\":[457,481,19,2]}'>[2]</a></sup></p>\n\n<p data-parsoid='{\"dsr\":[489,598,0,0]}'><sup id=\"cite_ref-blankwithnoreference_3-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[489,598,62,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-blankwithnoreference-3\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-blankwithnoreference-3\"},\"sa\":{\"href\":\"#cite_note-blankwithnoreference-3\"},\"dsr\":[551,592,36,2]}'>[3]</a></sup></p>\n\n<p data-parsoid='{\"dsr\":[600,744,0,0]}'><span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[600,744,58,7]}'>Cite error: Invalid parameter in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[691,733,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[697,726,8,9]}'>&lt;references></span></code> tag</span></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[746,1446,32,6]}'>\n<ol data-parsoid='{\"dsr\":[779,1439,0,0]}'><li data-parsoid='{\"dsr\":[779,915,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[781,838,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[812,831,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[839,915,29,7]}'>Also zero, but differently! (Normal ref)</span></li>\n<li data-parsoid='{\"dsr\":[916,1160,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[918,981,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-bar_2-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-bar_2-0\"},\"sa\":{\"href\":\"#cite_ref-bar_2-0\"},\"dsr\":[949,974,20,2]}'>↑</a></span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[982,1160,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1060,1095,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1066,1088,8,9]}'>&lt;ref></span></code> tag; no text was provided for refs named <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1137,1153,6,7]}'>bar</code></span></li>\n<li data-parsoid='{\"dsr\":[1161,1439,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[1163,1243,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-blankwithnoreference_3-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-blankwithnoreference_3-0\"},\"sa\":{\"href\":\"#cite_ref-blankwithnoreference_3-0\"},\"dsr\":[1194,1236,37,2]}'>↑</a></span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[1244,1439,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1322,1357,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1328,1350,8,9]}'>&lt;ref></span></code> tag; no text was provided for refs named <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1399,1432,6,7]}'>blankwithnoreference</code></span></li></ol>\n</div>",
        "html2wt": "<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag;\nname cannot be a simple integer. Use a descriptive title</span>\n\n<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup>\n\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: The opening <code><nowiki><ref></nowiki></code> tag is malformed or has a bad name</span>\n\n<sup id=\"cite_ref-bar_2-0\" class=\"reference\">[[#cite_note-bar-2|[2]]]</sup>\n\n<sup id=\"cite_ref-blankwithnoreference_3-0\" class=\"reference\">[[#cite_note-blankwithnoreference-3|[3]]]</sup>\n\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid parameter in <code><nowiki><references></nowiki></code> tag</span>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">Also zero, but differently! (Normal ref)</span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-bar_2-0|↑]]</span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; no text was provided for refs named <code>bar</code></span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-blankwithnoreference_3-0|↑]]</span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; no text was provided for refs named <code>blankwithnoreference</code></span>\n</div>"
    },
    "Can't have name=\"…\" and follow=\"…\" the same time": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,54,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-theName_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,54,40,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"theName\",\"follow\":\"theFollows\"},\"body\":{\"id\":\"mw-reference-text-cite_note-theName-1\"}}'><a href=\"./Parser_test#cite_note-theName-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"dsr\":[55,69,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-theName-1\" id=\"cite_note-theName-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-theName_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-theName-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">theValue</span></li></ol>",
        "html2wt": "<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag;\ninvalid names, e.g. too many</span>\n"
    },
    "Conflicting name=\"…\" and follow=\"…\" still invalid when a third parameter is present": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,68,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-theName_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,68,54,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"theName\",\"follow\":\"theFollows\",\"dummy\":\"dummy\"},\"body\":{\"id\":\"mw-reference-text-cite_note-theName-1\"}}'><a href=\"./Parser_test#cite_note-theName-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"dsr\":[69,83,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-theName-1\" id=\"cite_note-theName-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-theName_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-theName-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">theValue</span></li></ol>",
        "html2wt": "<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag;\ninvalid names, e.g. too many</span>\n"
    },
    "It's not possible to follow=\"…\" a <ref> defined in the <references> section": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,38,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,38,22,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"follow\":\"theName\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[39,100,12,13]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"body\":{\"html\":\"\\n&lt;sup about=\\\"#mwt7\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[52,86,20,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"theName\\\"},\\\"body\\\":{\\\"id\\\":\\\"mw-reference-text-cite_note-theName-2\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-theName-2\\\" style=\\\"counter-reset: mw-Ref 2;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[2]&lt;/span>&lt;/a>&lt;/sup>\\n\"}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">theFollows</span></li><li about=\"#cite_note-theName-2\" id=\"cite_note-theName-2\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"></span> <span id=\"mw-reference-text-cite_note-theName-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">theValue</span></li></ol>",
        "html2html": "<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,88,32,6]}'>\n\n<p data-parsoid='{\"dsr\":[34,80,0,0]}'><span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[34,80,29,7]}'>theFollows</span></p>\n\n</div>\n<p data-parsoid='{\"dsr\":[89,306,0,0]}'><span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[89,306,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[159,194,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[165,187,8,9]}'>&lt;ref></span></code> tag with name \"theName\" defined in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[230,272,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[236,265,8,9]}'>&lt;references></span></code> is not used in prior text.</span></p>\n",
        "html2wt": "<div class=\"mw-references-wrap\">\n\n<span class=\"reference-text\">theFollows</span>\n\n</div>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag with name \"theName\" defined in <code><nowiki><references></nowiki></code> is not used in prior text.</span>\n"
    },
    "A follow=\"…\" before its parent is not merged": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,73,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,38,22,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"follow\":\"theName\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-theName_2-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[39,73,20,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"theName\"},\"body\":{\"id\":\"mw-reference-text-cite_note-theName-2\"}}'><a href=\"./Parser_test#cite_note-theName-2\" style=\"counter-reset: mw-Ref 2;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[2]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt7\" data-parsoid='{\"dsr\":[73,73,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">theFollows</span></li><li about=\"#cite_note-theName-2\" id=\"cite_note-theName-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-theName_2-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-theName-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">theValue</span></li></ol>",
        "wt2wt": "<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,83,0,0]}'><sup id=\"cite_ref-theName_2-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,83,49,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-theName-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-theName-2\"},\"sa\":{\"href\":\"#cite_note-theName-2\"},\"dsr\":[49,77,23,2]}'>[1]</a></sup></p><div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[83,287,32,6]}'>\n\n<p data-parsoid='{\"dsr\":[117,163,0,0]}'><span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[117,163,29,7]}'>theFollows</span></p>\n\n<ol data-parsoid='{\"dsr\":[165,279,0,0]}'><li data-parsoid='{\"dsr\":[165,279,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[167,234,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-theName_2-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-theName_2-0\"},\"sa\":{\"href\":\"#cite_ref-theName_2-0\"},\"dsr\":[198,227,24,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[235,279,29,7]}'>theValue</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-theName_2-0\" class=\"reference\">[[#cite_note-theName-2|[1]]]</sup><div class=\"mw-references-wrap\">\n\n<span class=\"reference-text\">theFollows</span>\n\n# <span class=\"mw-cite-backlink\">[[#cite_ref-theName_2-0|↑]]</span> <span class=\"reference-text\">theValue</span>\n\n</div>"
    },
    "Valid follow=\"…\" after it's parent": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,73,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-theName_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,34,20,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"theName\"},\"body\":{\"id\":\"mw-reference-text-cite_note-theName-1\"}}'><a href=\"./Parser_test#cite_note-theName-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[35,73,22,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"follow\":\"theName\"},\"body\":{\"id\":\"mw-reference-text-cite_note-2\"}}'><a href=\"./Parser_test#cite_note-2\" style=\"counter-reset: mw-Ref 2;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[2]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt7\" data-parsoid='{\"dsr\":[73,73,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-theName-1\" id=\"cite_note-theName-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-theName_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-theName-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">theValue</span></li><li about=\"#cite_note-2\" id=\"cite_note-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-2\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">theFollows</span></li></ol>",
        "wt2wt": "<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,83,0,0]}'><sup id=\"cite_ref-theName_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,83,49,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-theName-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-theName-1\"},\"sa\":{\"href\":\"#cite_note-theName-1\"},\"dsr\":[49,77,23,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[85,251,32,6]}'>\n<ol data-parsoid='{\"dsr\":[118,243,0,0]}'><li data-parsoid='{\"dsr\":[118,243,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[120,187,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-theName_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-theName_1-0\"},\"sa\":{\"href\":\"#cite_ref-theName_1-0\"},\"dsr\":[151,180,24,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[188,243,29,7]}'>theValue theFollows</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-theName_1-0\" class=\"reference\">[[#cite_note-theName-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-theName_1-0|↑]]</span> <span class=\"reference-text\">theValue theFollows</span>\n\n</div>"
    },
    "Valid parameters become invalid when a third is present": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,65,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-theName_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,65,51,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"theName\",\"group\":\"theGroup\",\"dummy\":\"dummy\"},\"body\":{\"id\":\"mw-reference-text-cite_note-theName-1\"}}'><a href=\"./Parser_test#cite_note-theName-1\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"theGroup\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[theGroup 1]</span></a></sup></p>\n<ol class=\"mw-references references\" data-mw-group=\"theGroup\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"group\":\"theGroup\",\"dsr\":[66,97,31,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"theGroup\"}}'><li about=\"#cite_note-theName-1\" id=\"cite_note-theName-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-theName_1-0\" data-mw-group=\"theGroup\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-theName-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">theValue</span></li></ol>",
        "html2wt": "<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag;\ninvalid names, e.g. too many</span>\n"
    },
    "Simple <ref>, with <references/> in group": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,130,0,0]}'>Wikipedia rocks!<sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[16,58,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\nWikipedia rocks!<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[75,130,18,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"note\"},\"body\":{\"id\":\"mw-reference-text-cite_note-2\"}}'><a href=\"./Parser_test#cite_note-2\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"note\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[note 1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[132,146,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">Proceeds of Rockology, vol. XXI</span></li></ol>\n<ol class=\"mw-references references\" data-mw-group=\"note\" typeof=\"mw:Extension/references\" about=\"#mwt12\" data-parsoid='{\"group\":\"note\",\"dsr\":[147,174,27,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"note\"}}'><li about=\"#cite_note-2\" id=\"cite_note-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-2\" data-mw-group=\"note\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">Proceeds of Rockology, vol. XXI</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,168,0,0]}'>Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[16,81,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[55,75,15,2]}'>[1]</a></sup>\nWikipedia rocks!<sup id=\"cite_ref-2\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[98,168,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-2\"},\"sa\":{\"href\":\"#cite_note-2\"},\"dsr\":[137,162,15,2]}'>[note 1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[170,338,32,6]}'>\n<ol data-parsoid='{\"dsr\":[203,330,0,0]}'><li data-parsoid='{\"dsr\":[203,330,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[205,262,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[236,255,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[263,330,29,7]}'>Proceeds of Rockology, vol. XXI</span></li></ol>\n\n</div>\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[339,507,32,6]}'>\n<ol data-parsoid='{\"dsr\":[372,499,0,0]}'><li data-parsoid='{\"dsr\":[372,499,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[374,431,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-2\"},\"sa\":{\"href\":\"#cite_ref-2\"},\"dsr\":[405,424,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[432,499,29,7]}'>Proceeds of Rockology, vol. XXI</span></li></ol>\n\n</div>",
        "html2wt": "Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup>\nWikipedia rocks!<sup id=\"cite_ref-2\" class=\"reference\">[[#cite_note-2|[note 1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">Proceeds of Rockology, vol. XXI</span>\n\n</div>\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-2|↑]]</span> <span class=\"reference-text\">Proceeds of Rockology, vol. XXI</span>\n\n</div>"
    },
    "Simple <ref>, with <references/> in group, with groupname in Chinese": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,94,0,0]}'>AAA<sup about=\"#mwt5\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[3,31,17,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"参\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"参\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[参 1]</span></a></sup>BBB<sup about=\"#mwt7\" class=\"mw-ref\" id=\"cite_ref-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[34,63,17,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"注\"},\"body\":{\"id\":\"mw-reference-text-cite_note-2\"}}'><a href=\"./Parser_test#cite_note-2\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"注\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[注 1]</span></a></sup>CCC<sup about=\"#mwt9\" class=\"mw-ref\" id=\"cite_ref-3\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[66,94,17,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"参\"},\"body\":{\"id\":\"mw-reference-text-cite_note-3\"}}'><a href=\"./Parser_test#cite_note-3\" style=\"counter-reset: mw-Ref 2;\" data-mw-group=\"参\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[参 2]</span></a></sup></p>\n\n<dl data-parsoid='{\"dsr\":[96,101,0,0]}'><dt data-parsoid='{\"dsr\":[96,101,1,0]}'>refs</dt></dl>\n<ol class=\"mw-references references\" data-mw-group=\"参\" typeof=\"mw:Extension/references\" about=\"#mwt12\" data-parsoid='{\"group\":\"参\",\"dsr\":[102,128,26,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"参\"}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" data-mw-group=\"参\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">ref a</span></li><li about=\"#cite_note-3\" id=\"cite_note-3\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-3\" data-mw-group=\"参\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-3\" class=\"mw-reference-text\" data-parsoid=\"{}\">ref c</span></li></ol>\n\n<dl data-parsoid='{\"dsr\":[130,136,0,0]}'><dt data-parsoid='{\"dsr\":[130,136,1,0]}'>notes</dt></dl>\n<ol class=\"mw-references references\" data-mw-group=\"注\" typeof=\"mw:Extension/references\" about=\"#mwt15\" data-parsoid='{\"group\":\"注\",\"dsr\":[137,163,26,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"注\"}}'><li about=\"#cite_note-2\" id=\"cite_note-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-2\" data-mw-group=\"注\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">note b</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,216,0,0]}'>AAA<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[3,72,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[42,66,15,2]}'>[参 1]</a></sup>BBB<sup id=\"cite_ref-2\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[75,144,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-2\"},\"sa\":{\"href\":\"#cite_note-2\"},\"dsr\":[114,138,15,2]}'>[注 1]</a></sup>CCC<sup id=\"cite_ref-3\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[147,216,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-3\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-3\"},\"sa\":{\"href\":\"#cite_note-3\"},\"dsr\":[186,210,15,2]}'>[参 2]</a></sup></p>\n\n<dl data-parsoid='{\"dsr\":[218,224,0,0]}'><dt data-parsoid='{\"dsr\":[218,224,1,0]}'>refs</dt></dl>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[226,470,32,6]}'>\n<ol data-parsoid='{\"dsr\":[259,462,0,0]}'><li data-parsoid='{\"dsr\":[259,360,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[261,318,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[292,311,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[319,360,29,7]}'>ref a</span></li>\n<li data-parsoid='{\"dsr\":[361,462,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[363,420,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-3\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-3\"},\"sa\":{\"href\":\"#cite_ref-3\"},\"dsr\":[394,413,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[421,462,29,7]}'>ref c</span></li></ol>\n\n</div>\n\n<dl data-parsoid='{\"dsr\":[472,479,0,0]}'><dt data-parsoid='{\"dsr\":[472,479,1,0]}'>notes</dt></dl>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[481,624,32,6]}'>\n<ol data-parsoid='{\"dsr\":[514,616,0,0]}'><li data-parsoid='{\"dsr\":[514,616,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[516,573,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-2\"},\"sa\":{\"href\":\"#cite_ref-2\"},\"dsr\":[547,566,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[574,616,29,7]}'>note b</span></li></ol>\n\n</div>",
        "html2wt": "AAA<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[参 1]]]</sup>BBB<sup id=\"cite_ref-2\" class=\"reference\">[[#cite_note-2|[注 1]]]</sup>CCC<sup id=\"cite_ref-3\" class=\"reference\">[[#cite_note-3|[参 2]]]</sup>\n\n; refs\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">ref a</span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-3|↑]]</span> <span class=\"reference-text\">ref c</span>\n\n</div>\n\n; notes\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-2|↑]]</span> <span class=\"reference-text\">note b</span>\n\n</div>"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes()": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,91,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-n1_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,41,25,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"g\",\"name\":\"n1\"},\"body\":{\"id\":\"mw-reference-text-cite_note-n1-1\"}}'><a href=\"./Parser_test#cite_note-n1-1\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"g\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[g 1]</span></a></sup>\n<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-n2_2-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[42,91,29,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"g\",\"name\":\"n2\"},\"body\":{\"id\":\"mw-reference-text-cite_note-n2-2\"}}'><a href=\"./Parser_test#cite_note-n2-2\" style=\"counter-reset: mw-Ref 2;\" data-mw-group=\"g\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[g 2]</span></a></sup></p>\n<ol class=\"mw-references references\" data-mw-group=\"g\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"group\":\"g\",\"dsr\":[92,116,24,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"g\"}}'><li about=\"#cite_note-n1-1\" id=\"cite_note-n1-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-n1_1-0\" data-mw-group=\"g\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-n1-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">in group g</span></li><li about=\"#cite_note-n2-2\" id=\"cite_note-n2-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-n2_2-0\" data-mw-group=\"g\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-n2-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">in group \" g \"</span></li></ol>\n<ol class=\"mw-references references\" data-mw-group=\"g\" typeof=\"mw:Extension/references\" about=\"#mwt12\" data-parsoid='{\"group\":\"g\",\"dsr\":[117,143,26,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"g\"}}'></ol>",
        "wt2wt": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\"g\" name=\"n2\">in group \" g \"</ref>\n<references group=\"g\" />\n<references group=\"g\" />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,151,0,0]}'><sup id=\"cite_ref-n1_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,75,44,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-n1-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-n1-1\"},\"sa\":{\"href\":\"#cite_note-n1-1\"},\"dsr\":[44,69,18,2]}'>[g 1]</a></sup>\n<sup id=\"cite_ref-n2_2-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[76,151,44,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-n2-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-n2-2\"},\"sa\":{\"href\":\"#cite_note-n2-2\"},\"dsr\":[120,145,18,2]}'>[g 2]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[153,421,32,6]}'>\n<ol data-parsoid='{\"dsr\":[186,413,0,0]}'><li data-parsoid='{\"dsr\":[186,297,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[188,250,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-n1_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-n1_1-0\"},\"sa\":{\"href\":\"#cite_ref-n1_1-0\"},\"dsr\":[219,243,19,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[251,297,29,7]}'>in group g</span></li>\n<li data-parsoid='{\"dsr\":[298,413,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[300,362,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-n2_2-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-n2_2-0\"},\"sa\":{\"href\":\"#cite_ref-n2_2-0\"},\"dsr\":[331,355,19,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[363,413,29,7]}'>in group \" g \"</span></li></ol>\n\n</div>\n",
        "html2wt": "<sup id=\"cite_ref-n1_1-0\" class=\"reference\">[[#cite_note-n1-1|[g 1]]]</sup>\n<sup id=\"cite_ref-n2_2-0\" class=\"reference\">[[#cite_note-n2-2|[g 2]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-n1_1-0|↑]]</span> <span class=\"reference-text\">in group g</span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-n2_2-0|↑]]</span> <span class=\"reference-text\">in group \" g \"</span>\n\n</div>\n"
    },
    "<ref> defined in <references>": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,18,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-foo_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,18,18,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"foo\"}}'><a href=\"./Parser_test#cite_note-foo-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[20,72,12,13]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"body\":{\"html\":\"\\n&lt;sup about=\\\"#mwt7\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[33,58,16,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"foo\\\"},\\\"body\\\":{\\\"id\\\":\\\"mw-reference-text-cite_note-foo-1\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-foo-1\\\" style=\\\"counter-reset: mw-Ref 1;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[1]&lt;/span>&lt;/a>&lt;/sup>\\n\"}}'><li about=\"#cite_note-foo-1\" id=\"cite_note-foo-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-foo_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-foo-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">BAR</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,75,0,0]}'><sup id=\"cite_ref-foo_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,75,45,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-foo-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-foo-1\"},\"sa\":{\"href\":\"#cite_note-foo-1\"},\"dsr\":[45,69,19,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[77,223,32,6]}'>\n<ol data-parsoid='{\"dsr\":[110,215,0,0]}'><li data-parsoid='{\"dsr\":[110,215,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[112,175,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-foo_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-foo_1-0\"},\"sa\":{\"href\":\"#cite_ref-foo_1-0\"},\"dsr\":[143,168,20,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[176,215,29,7]}'>BAR</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-foo_1-0\" class=\"reference\">[[#cite_note-foo-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-foo_1-0|↑]]</span> <span class=\"reference-text\">BAR</span>\n\n</div>"
    },
    "<ref> defined in <references> called with #tag": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,18,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-foo_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,18,18,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"foo\"}}'><a href=\"./Parser_test#cite_note-foo-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<p data-parsoid='{\"dsr\":[20,67,0,0]}'><references about=\"#mwt5\" typeof=\"mw:Transclusion\" data-parsoid='{\"dsr\":[20,67,null,null],\"pi\":[[{\"k\":\"1\"}]]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"#tag:references\",\"function\":\"tag\"},\"params\":{\"1\":{\"wt\":\"\\n&lt;ref name=\\\"foo\\\">BAR&lt;/ref>\\n\"}},\"i\":0}}]}'>\n<sup about=\"#mwt7\" class=\"mw-ref\" id=\"cite_ref-foo_1-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"src\":\"&lt;ref name=\\\"foo\\\">BAR&lt;/ref>\"}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"foo\"},\"body\":{\"id\":\"mw-reference-text-cite_note-foo-1\"}}'><a href=\"./Parser_test#cite_note-foo-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n</references></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt8\" data-parsoid='{\"dsr\":[67,67,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-foo-1\" id=\"cite_note-foo-1\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-foo_1-0\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">1 </span></a><a href=\"./Parser_test#cite_ref-foo_1-1\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">2 </span></a></span> <span id=\"mw-reference-text-cite_note-foo-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">BAR</span></li></ol>",
        "wt2wt": "<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,75,0,0]}'><sup id=\"cite_ref-foo_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,75,45,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-foo-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-foo-1\"},\"sa\":{\"href\":\"#cite_note-foo-1\"},\"dsr\":[45,69,19,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[77,223,32,6]}'>\n<ol data-parsoid='{\"dsr\":[110,215,0,0]}'><li data-parsoid='{\"dsr\":[110,215,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[112,175,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-foo_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-foo_1-0\"},\"sa\":{\"href\":\"#cite_ref-foo_1-0\"},\"dsr\":[143,168,20,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[176,215,29,7]}'>BAR</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-foo_1-0\" class=\"reference\">[[#cite_note-foo-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-foo_1-0|↑]]</span> <span class=\"reference-text\">BAR</span>\n\n</div>"
    },
    "<ref> defined in <references> error conditions": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,28,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-foo_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,28,28,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"foo\",\"group\":\"2\"}}'><a href=\"./Parser_test#cite_note-foo-1\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"2\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[2 1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" data-mw-group=\"2\" typeof=\"mw:Extension/references\" about=\"#mwt18\" data-parsoid='{\"group\":\"2\",\"dsr\":[30,175,22,13]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"2\"},\"body\":{\"html\":\"\\n&lt;sup about=\\\"#mwt10\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[53,71,18,0]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"foo\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-foo-1\\\" style=\\\"counter-reset: mw-Ref 1;\\\" data-mw-group=\\\"2\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[2 1]&lt;/span>&lt;/a>&lt;/sup>\\n&lt;sup about=\\\"#mwt12\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[72,100,19,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"unused\\\"},\\\"body\\\":{\\\"id\\\":\\\"mw-reference-text-cite_note-unused-2\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-unused-2\\\" style=\\\"counter-reset: mw-Ref 2;\\\" data-mw-group=\\\"2\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[2 2]&lt;/span>&lt;/a>&lt;/sup>\\n&lt;sup about=\\\"#mwt14\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[101,142,26,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"foo\\\",\\\"group\\\":\\\"1\\\"},\\\"body\\\":{\\\"id\\\":\\\"mw-reference-text-cite_note-foo-3\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-foo-3\\\" style=\\\"counter-reset: mw-Ref 1;\\\" data-mw-group=\\\"1\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[1 1]&lt;/span>&lt;/a>&lt;/sup>\\n&lt;sup about=\\\"#mwt16\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[143,161,5,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{},\\\"body\\\":{\\\"id\\\":\\\"mw-reference-text-cite_note-4\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-4\\\" style=\\\"counter-reset: mw-Ref 3;\\\" data-mw-group=\\\"2\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[2 3]&lt;/span>&lt;/a>&lt;/sup>\\n\"}}'><li about=\"#cite_note-foo-1\" id=\"cite_note-foo-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-foo_1-0\" data-mw-group=\"2\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-foo-1\" class=\"mw-reference-text\" data-parsoid=\"{}\"></span></li><li about=\"#cite_note-unused-2\" id=\"cite_note-unused-2\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"></span> <span id=\"mw-reference-text-cite_note-unused-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">BAR</span></li><li about=\"#cite_note-4\" id=\"cite_note-4\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"></span> <span id=\"mw-reference-text-cite_note-4\" class=\"mw-reference-text\" data-parsoid=\"{}\">BAR BAR</span></li></ol>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt19\" data-mw-group=\"1\" data-parsoid='{\"group\":\"1\",\"dsr\":[175,175,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"1\"},\"autoGenerated\":true}'><li about=\"#cite_note-foo-3\" id=\"cite_note-foo-3\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"></span> <span id=\"mw-reference-text-cite_note-foo-3\" class=\"mw-reference-text\" data-parsoid=\"{}\">bad group</span></li></ol>",
        "wt2wt": "<ref name=\"foo\" group=\"2\" />\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>\n<references group=\"1\" />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,77,0,0]}'><sup id=\"cite_ref-foo_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,77,45,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-foo-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-foo-1\"},\"sa\":{\"href\":\"#cite_note-foo-1\"},\"dsr\":[45,71,19,2]}'>[2 1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[79,363,32,6]}'>\n<ol data-parsoid='{\"dsr\":[112,356,0,0]}'><li data-parsoid='{\"dsr\":[112,356,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[114,177,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-foo_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-foo_1-0\"},\"sa\":{\"href\":\"#cite_ref-foo_1-0\"},\"dsr\":[145,170,20,2]}'>↑</a></span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[178,356,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[256,291,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[262,284,8,9]}'>&lt;ref></span></code> tag; no text was provided for refs named <code data-parsoid='{\"stx\":\"html\",\"dsr\":[333,349,6,7]}'>foo</code></span></li></ol>\n</div>\n<p data-parsoid='{\"dsr\":[364,1177,0,0]}'><span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[364,566,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[434,469,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[440,462,8,9]}'>&lt;ref></span></code> tag defined in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[485,527,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[491,520,8,9]}'>&lt;references></span></code> with name \"foo\" has no content.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[567,783,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[637,672,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[643,665,8,9]}'>&lt;ref></span></code> tag with name \"unused\" defined in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[707,749,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[713,742,8,9]}'>&lt;references></span></code> is not used in prior text.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[784,983,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[854,889,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[860,882,8,9]}'>&lt;ref></span></code> tag in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[897,939,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[903,932,8,9]}'>&lt;references></span></code> has conflicting group attribute \"1\".</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[984,1177,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1054,1089,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1060,1082,8,9]}'>&lt;ref></span></code> tag defined in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1105,1147,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1111,1140,8,9]}'>&lt;references></span></code> has no name attribute.</span></p>\n",
        "html2wt": "<sup id=\"cite_ref-foo_1-0\" class=\"reference\">[[#cite_note-foo-1|[2 1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-foo_1-0|↑]]</span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; no text was provided for refs named <code>foo</code></span>\n</div>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag defined in <code><nowiki><references></nowiki></code> with name \"foo\" has no content.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag with name \"unused\" defined in <code><nowiki><references></nowiki></code> is not used in prior text.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag in <code><nowiki><references></nowiki></code> has conflicting group attribute \"1\".</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag defined in <code><nowiki><references></nowiki></code> has no name attribute.</span>\n"
    },
    "Error conditions on non-visible content": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,60,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-a_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,21,14,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"},\"body\":{\"id\":\"mw-reference-text-cite_note-a-1\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-b_2-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[22,43,14,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"b\"},\"body\":{\"id\":\"mw-reference-text-cite_note-b-2\"}}'><a href=\"./Parser_test#cite_note-b-2\" style=\"counter-reset: mw-Ref 2;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[2]</span></a></sup>\n<sup about=\"#mwt9\" class=\"mw-ref\" id=\"cite_ref-c_3-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[44,60,16,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"c\"}}'><a href=\"./Parser_test#cite_note-c-3\" style=\"counter-reset: mw-Ref 3;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[3]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt21\" data-parsoid='{\"dsr\":[61,143,12,13]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"body\":{\"html\":\"\\n&lt;sup about=\\\"#mwt15\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[74,90,16,0]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"a\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-a-1\\\" style=\\\"counter-reset: mw-Ref 1;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[1]&lt;/span>&lt;/a>&lt;/sup>\\n&lt;sup about=\\\"#mwt17\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[91,107,16,0]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"b\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-b-2\\\" style=\\\"counter-reset: mw-Ref 2;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[2]&lt;/span>&lt;/a>&lt;/sup>\\n&lt;sup about=\\\"#mwt19\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[108,129,14,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"c\\\"},\\\"body\\\":{\\\"id\\\":\\\"mw-reference-text-cite_note-c-3\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-c-3\\\" style=\\\"counter-reset: mw-Ref 3;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[3]&lt;/span>&lt;/a>&lt;/sup>\\n\"}}'><li about=\"#cite_note-a-1\" id=\"cite_note-a-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-a_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-a-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">x</span></li><li about=\"#cite_note-b-2\" id=\"cite_note-b-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-b_2-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-b-2\" class=\"mw-reference-text\" data-parsoid=\"{}\"> </span></li><li about=\"#cite_note-c-3\" id=\"cite_note-c-3\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-c_3-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-c-3\" class=\"mw-reference-text\" data-parsoid=\"{}\"> </span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,215,0,0]}'><sup id=\"cite_ref-a_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,71,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-a-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-a-1\"},\"sa\":{\"href\":\"#cite_note-a-1\"},\"dsr\":[43,65,17,2]}'>[1]</a></sup>\n<sup id=\"cite_ref-b_2-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[72,143,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-b-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-b-2\"},\"sa\":{\"href\":\"#cite_note-b-2\"},\"dsr\":[115,137,17,2]}'>[2]</a></sup>\n<sup id=\"cite_ref-c_3-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[144,215,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-c-3\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-c-3\"},\"sa\":{\"href\":\"#cite_note-c-3\"},\"dsr\":[187,209,17,2]}'>[3]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[217,840,32,6]}'>\n<ol data-parsoid='{\"dsr\":[250,833,0,0]}'><li data-parsoid='{\"dsr\":[250,351,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[252,313,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-a_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-a_1-0\"},\"sa\":{\"href\":\"#cite_ref-a_1-0\"},\"dsr\":[283,306,18,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[314,351,29,7]}'>x</span></li>\n<li data-parsoid='{\"dsr\":[352,592,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[354,415,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-b_2-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-b_2-0\"},\"sa\":{\"href\":\"#cite_ref-b_2-0\"},\"dsr\":[385,408,18,2]}'>↑</a></span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[416,592,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[494,529,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[500,522,8,9]}'>&lt;ref></span></code> tag; no text was provided for refs named <code data-parsoid='{\"stx\":\"html\",\"dsr\":[571,585,6,7]}'>b</code></span></li>\n<li data-parsoid='{\"dsr\":[593,833,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[595,656,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-c_3-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-c_3-0\"},\"sa\":{\"href\":\"#cite_ref-c_3-0\"},\"dsr\":[626,649,18,2]}'>↑</a></span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[657,833,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[735,770,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[741,763,8,9]}'>&lt;ref></span></code> tag; no text was provided for refs named <code data-parsoid='{\"stx\":\"html\",\"dsr\":[812,826,6,7]}'>c</code></span></li></ol>\n</div>\n<p data-parsoid='{\"dsr\":[841,1443,0,0]}'><span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[841,1041,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[911,946,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[917,939,8,9]}'>&lt;ref></span></code> tag defined in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[962,1004,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[968,997,8,9]}'>&lt;references></span></code> with name \"a\" has no content.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[1042,1242,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1112,1147,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1118,1140,8,9]}'>&lt;ref></span></code> tag defined in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1163,1205,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1169,1198,8,9]}'>&lt;references></span></code> with name \"b\" has no content.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[1243,1443,58,7]}'>Cite error: <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1313,1348,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1319,1341,8,9]}'>&lt;ref></span></code> tag defined in <code data-parsoid='{\"stx\":\"html\",\"dsr\":[1364,1406,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[1370,1399,8,9]}'>&lt;references></span></code> with name \"c\" has no content.</span></p>\n",
        "html2wt": "<sup id=\"cite_ref-a_1-0\" class=\"reference\">[[#cite_note-a-1|[1]]]</sup>\n<sup id=\"cite_ref-b_2-0\" class=\"reference\">[[#cite_note-b-2|[2]]]</sup>\n<sup id=\"cite_ref-c_3-0\" class=\"reference\">[[#cite_note-c-3|[3]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-a_1-0|↑]]</span> <span class=\"reference-text\">x</span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-b_2-0|↑]]</span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; no text was provided for refs named <code>b</code></span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-c_3-0|↑]]</span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; no text was provided for refs named <code>c</code></span>\n</div>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag defined in <code><nowiki><references></nowiki></code> with name \"a\" has no content.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag defined in <code><nowiki><references></nowiki></code> with name \"b\" has no content.</span>\n<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: <code><nowiki><ref></nowiki></code> tag defined in <code><nowiki><references></nowiki></code> with name \"c\" has no content.</span>\n"
    },
    "<ref> with custom group link with number names in Klingon": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,74,0,0]}'>Wikipedia rocks!<sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[16,74,21,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"klingon\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"klingon\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[klingon 1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" data-mw-group=\"klingon\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"group\":\"klingon\",\"dsr\":[76,106,30,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"klingon\"}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" data-mw-group=\"klingon\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">Proceeds of Rockology, vol. XXI</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,83,0,0]}'>Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[16,83,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[55,76,15,2]}'>[wa'</a>]</sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[85,253,32,6]}'>\n<ol data-parsoid='{\"dsr\":[118,245,0,0]}'><li data-parsoid='{\"dsr\":[118,245,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[120,177,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[151,170,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[178,245,29,7]}'>Proceeds of Rockology, vol. XXI</span></li></ol>\n\n</div>",
        "html2wt": "Wikipedia rocks!<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[wa']]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">Proceeds of Rockology, vol. XXI</span>\n\n</div>"
    },
    "Consecutive whitespace in custom link label message should not create empty []": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,61,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,30,21,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"klingon\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"klingon\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[klingon 1]</span></a></sup>\n<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[31,61,21,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"klingon\"},\"body\":{\"id\":\"mw-reference-text-cite_note-2\"}}'><a href=\"./Parser_test#cite_note-2\" style=\"counter-reset: mw-Ref 2;\" data-mw-group=\"klingon\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[klingon 2]</span></a></sup></p>\n<ol class=\"mw-references references\" data-mw-group=\"klingon\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"group\":\"klingon\",\"dsr\":[62,92,30,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"klingon\"}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" data-mw-group=\"klingon\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">1st</span></li><li about=\"#cite_note-2\" id=\"cite_note-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-2\" data-mw-group=\"klingon\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">2nd</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,136,0,0]}'><sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,67,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[39,60,15,2]}'>[wa'</a>]</sup>\n<sup id=\"cite_ref-2\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[68,136,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-2\"},\"sa\":{\"href\":\"#cite_note-2\"},\"dsr\":[107,129,15,2]}'>[cha'</a>]</sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[138,378,32,6]}'>\n<ol data-parsoid='{\"dsr\":[171,370,0,0]}'><li data-parsoid='{\"dsr\":[171,270,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[173,230,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[204,223,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[231,270,29,7]}'>1st</span></li>\n<li data-parsoid='{\"dsr\":[271,370,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[273,330,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-2\"},\"sa\":{\"href\":\"#cite_ref-2\"},\"dsr\":[304,323,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[331,370,29,7]}'>2nd</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[wa']]]</sup>\n<sup id=\"cite_ref-2\" class=\"reference\">[[#cite_note-2|[cha']]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">1st</span>\n# <span class=\"mw-cite-backlink\">[[#cite_ref-2|↑]]</span> <span class=\"reference-text\">2nd</span>\n\n</div>"
    },
    "Bug 31374 regression check: nested strip items": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,48,0,0]}'><ref about=\"#mwt2\" typeof=\"mw:Transclusion\" data-parsoid='{\"a\":{\"group\":null},\"sa\":{\"group\":\"Note\"},\"dsr\":[0,48,null,null],\"pi\":[[{\"k\":\"1\"},{\"k\":\"group\",\"named\":true}]]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"#tag:ref\",\"function\":\"tag\"},\"params\":{\"1\":{\"wt\":\"note&lt;ref>reference&lt;/ref>\"},\"group\":{\"wt\":\"Note\"}},\"i\":0}}]}'>note<sup about=\"#mwt4\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"src\":\"&lt;ref>reference&lt;/ref>\"}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></ref></p>\n<ol class=\"mw-references references\" data-mw-group=\"Note\" typeof=\"mw:Extension/references\" about=\"#mwt7\" data-parsoid='{\"group\":\"Note\",\"dsr\":[49,76,27,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"Note\"}}'></ol>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt10\" data-parsoid='{\"dsr\":[77,91,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">reference</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,70,0,0]}'><sup id=\"cite_ref-2\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,70,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-2\"},\"sa\":{\"href\":\"#cite_note-2\"},\"dsr\":[39,64,15,2]}'>[Note 1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[72,278,32,6]}'>\n<ol data-parsoid='{\"dsr\":[105,270,0,0]}'><li data-parsoid='{\"dsr\":[105,270,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[107,164,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-2\"},\"sa\":{\"href\":\"#cite_ref-2\"},\"dsr\":[138,157,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[165,270,29,7]}'>note<sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[198,263,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[237,257,15,2]}'>[1]</a></sup></span></li></ol>\n\n</div>\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[279,425,32,6]}'>\n<ol data-parsoid='{\"dsr\":[312,417,0,0]}'><li data-parsoid='{\"dsr\":[312,417,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[314,371,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[345,364,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[372,417,29,7]}'>reference</span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-2\" class=\"reference\">[[#cite_note-2|[Note 1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-2|↑]]</span> <span class=\"reference-text\">note<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup></span>\n\n</div>\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">reference</span>\n\n</div>"
    },
    "Bug 13073 regression check: wrapped <references>": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,16,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,16,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<div data-parsoid='{\"stx\":\"html\",\"dsr\":[17,42,5,6]}'><ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"dsr\":[22,36,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">\nfoo\n</span></li></ol></div>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,65,0,0]}'><sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,65,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[39,59,15,2]}'>[1]</a></sup></p>\n\n<div data-parsoid='{\"stx\":\"html\",\"dsr\":[67,219,5,6]}'><div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[72,213,32,6]}'>\n<ol data-parsoid='{\"dsr\":[105,205,0,0]}'><li data-parsoid='{\"dsr\":[105,205,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[107,164,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[138,157,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[165,205,29,7]}'> foo</span></li></ol>\n\n</div></div>",
        "html2wt": "<sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[1]]]</sup>\n\n<div><div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\"> foo</span>\n\n</div></div>"
    },
    "<ref> with no name and no content.": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,15,0,0]}'>Bla.<sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[4,15,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"html\":\"\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt4\" data-parsoid='{\"dsr\":[15,15,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\"></span></li></ol>",
        "wt2wt": "Bla.<ref></ref>\n<references />",
        "html2wt": "Bla.<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag;\nrefs with no name must have content</span>\n"
    },
    "<ref> with an empty-string name parameter and no content.": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,24,0,0]}'>Bla.<sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[4,24,13,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt4\" data-parsoid='{\"dsr\":[24,24,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\"> </span></li></ol>",
        "wt2wt": "Bla.<ref name=\"\"> </ref>\n<references />",
        "html2wt": "Bla.<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag;\nrefs with no name must have content</span>\n"
    },
    "<ref> with a non-empty name parameter and no content.": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,28,0,0]}'>Bla.<sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-void_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[4,28,17,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"void\"},\"body\":{\"id\":\"mw-reference-text-cite_note-void-1\"}}'><a href=\"./Parser_test#cite_note-void-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt4\" data-parsoid='{\"dsr\":[28,28,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-void-1\" id=\"cite_note-void-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-void_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-void-1\" class=\"mw-reference-text\" data-parsoid=\"{}\"> </span></li></ol>",
        "wt2wt": "Bla.<ref name=\"void\"> </ref>\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,81,0,0]}'>Bla.<sup id=\"cite_ref-void_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[4,81,46,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-void-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-void-1\"},\"sa\":{\"href\":\"#cite_note-void-1\"},\"dsr\":[50,75,20,2]}'>[1]</a></sup></p><div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[81,367,32,6]}'>\n<ol data-parsoid='{\"dsr\":[114,360,0,0]}'><li data-parsoid='{\"dsr\":[114,360,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[116,180,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-void_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-void_1-0\"},\"sa\":{\"href\":\"#cite_ref-void_1-0\"},\"dsr\":[147,173,21,2]}'>↑</a></span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[181,360,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[259,294,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[265,287,8,9]}'>&lt;ref></span></code> tag; no text was provided for refs named <code data-parsoid='{\"stx\":\"html\",\"dsr\":[336,353,6,7]}'>void</code></span></li></ol>\n</div>",
        "html2wt": "Bla.<sup id=\"cite_ref-void_1-0\" class=\"reference\">[[#cite_note-void-1|[1]]]</sup><div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-void_1-0|↑]]</span> <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; no text was provided for refs named <code>void</code></span>\n</div>"
    },
    "Multiple definition (outside <references/>)": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,47,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-a_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,23,14,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"},\"body\":{\"id\":\"mw-reference-text-cite_note-a-1\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n<sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-a_1-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[24,47,14,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"},\"body\":{\"html\":\"def\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[48,62,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-a-1\" id=\"cite_note-a-1\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-a_1-0\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">1 </span></a><a href=\"./Parser_test#cite_ref-a_1-1\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">2 </span></a></span> <span id=\"mw-reference-text-cite_note-a-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">abc</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,143,0,0]}'><sup id=\"cite_ref-a_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,71,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-a-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-a-1\"},\"sa\":{\"href\":\"#cite_note-a-1\"},\"dsr\":[43,65,17,2]}'>[1]</a></sup>\n<sup id=\"cite_ref-a_1-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[72,143,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-a-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-a-1\"},\"sa\":{\"href\":\"#cite_note-a-1\"},\"dsr\":[115,137,17,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[145,520,32,6]}'>\n<ol data-parsoid='{\"dsr\":[178,512,0,0]}'><li data-parsoid='{\"dsr\":[178,512,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[180,291,31,7]}'>↑ <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[215,249,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-a_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-a_1-0\"},\"sa\":{\"href\":\"#cite_ref-a_1-0\"},\"dsr\":[220,243,18,2]}'>1.0</a></sup> <sup data-parsoid='{\"stx\":\"html\",\"dsr\":[250,284,5,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-a_1-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-a_1-1\"},\"sa\":{\"href\":\"#cite_ref-a_1-1\"},\"dsr\":[255,278,18,2]}'>1.1</a></sup></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[292,512,29,7]}'>abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[325,505,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[403,438,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[409,431,8,9]}'>&lt;ref></span></code> tag; name \"a\" defined multiple times with different content</span></span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-a_1-0\" class=\"reference\">[[#cite_note-a-1|[1]]]</sup>\n<sup id=\"cite_ref-a_1-1\" class=\"reference\">[[#cite_note-a-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">↑ <sup>[[#cite_ref-a_1-0|1.0]]</sup> <sup>[[#cite_ref-a_1-1|1.1]]</sup></span> <span class=\"reference-text\">abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; name \"a\" defined multiple times with different content</span></span>\n\n</div>"
    },
    "Multiple definition (inside <references/>)": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,16,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-a_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,16,16,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt12\" data-parsoid='{\"dsr\":[17,91,12,13]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"body\":{\"html\":\"\\n&lt;sup about=\\\"#mwt8\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[30,53,14,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"a\\\"},\\\"body\\\":{\\\"id\\\":\\\"mw-reference-text-cite_note-a-1\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-a-1\\\" style=\\\"counter-reset: mw-Ref 1;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[1]&lt;/span>&lt;/a>&lt;/sup>\\n&lt;sup about=\\\"#mwt10\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[54,77,14,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"a\\\"},\\\"body\\\":{\\\"html\\\":\\\"def\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-a-1\\\" style=\\\"counter-reset: mw-Ref 1;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[1]&lt;/span>&lt;/a>&lt;/sup>\\n\"}}'><li about=\"#cite_note-a-1\" id=\"cite_note-a-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-a_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-a-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">abc</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,71,0,0]}'><sup id=\"cite_ref-a_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,71,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-a-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-a-1\"},\"sa\":{\"href\":\"#cite_note-a-1\"},\"dsr\":[43,65,17,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[73,398,32,6]}'>\n<ol data-parsoid='{\"dsr\":[106,390,0,0]}'><li data-parsoid='{\"dsr\":[106,390,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[108,169,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-a_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-a_1-0\"},\"sa\":{\"href\":\"#cite_ref-a_1-0\"},\"dsr\":[139,162,18,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[170,390,29,7]}'>abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[203,383,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[281,316,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[287,309,8,9]}'>&lt;ref></span></code> tag; name \"a\" defined multiple times with different content</span></span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-a_1-0\" class=\"reference\">[[#cite_note-a-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-a_1-0|↑]]</span> <span class=\"reference-text\">abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; name \"a\" defined multiple times with different content</span></span>\n\n</div>"
    },
    "Multiple definition (mixed outside/inside)": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,23,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-a_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,23,14,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"},\"body\":{\"id\":\"mw-reference-text-cite_note-a-1\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[24,74,12,13]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"body\":{\"html\":\"\\n&lt;sup about=\\\"#mwt7\\\" class=\\\"mw-ref\\\" rel=\\\"dc:references\\\" typeof=\\\"mw:Extension/ref\\\" data-parsoid=&apos;{\\\"dsr\\\":[37,60,14,6]}&apos; data-mw=&apos;{\\\"name\\\":\\\"ref\\\",\\\"attrs\\\":{\\\"name\\\":\\\"a\\\"},\\\"body\\\":{\\\"html\\\":\\\"def\\\"}}&apos;>&lt;a href=\\\"./Parser_test#cite_note-a-1\\\" style=\\\"counter-reset: mw-Ref 1;\\\" data-parsoid=\\\"{}\\\">&lt;span class=\\\"mw-reflink-text\\\" data-parsoid=\\\"{}\\\">[1]&lt;/span>&lt;/a>&lt;/sup>\\n\"}}'><li about=\"#cite_note-a-1\" id=\"cite_note-a-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-a_1-0\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-a-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">abc</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,71,0,0]}'><sup id=\"cite_ref-a_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,71,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-a-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-a-1\"},\"sa\":{\"href\":\"#cite_note-a-1\"},\"dsr\":[43,65,17,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[73,398,32,6]}'>\n<ol data-parsoid='{\"dsr\":[106,390,0,0]}'><li data-parsoid='{\"dsr\":[106,390,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[108,169,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-a_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-a_1-0\"},\"sa\":{\"href\":\"#cite_ref-a_1-0\"},\"dsr\":[139,162,18,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[170,390,29,7]}'>abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[203,383,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[281,316,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[287,309,8,9]}'>&lt;ref></span></code> tag; name \"a\" defined multiple times with different content</span></span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-a_1-0\" class=\"reference\">[[#cite_note-a-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-a_1-0|↑]]</span> <span class=\"reference-text\">abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; name \"a\" defined multiple times with different content</span></span>\n\n</div>"
    },
    "Multiple definition (inside {{#tag:references}})": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,86,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-a_1-0\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,16,16,0]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n<references about=\"#mwt6\" typeof=\"mw:Transclusion\" data-parsoid='{\"dsr\":[17,86,null,null],\"pi\":[[{\"k\":\"1\"}]]}' data-mw='{\"parts\":[{\"template\":{\"target\":{\"wt\":\"#tag:references\",\"function\":\"tag\"},\"params\":{\"1\":{\"wt\":\"\\n&lt;ref name=\\\"a\\\">abc&lt;/ref>\\n&lt;ref name=\\\"a\\\">def&lt;/ref>\\n\"}},\"i\":0}}]}'>\n<sup about=\"#mwt8\" class=\"mw-ref\" id=\"cite_ref-a_1-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"src\":\"&lt;ref name=\\\"a\\\">abc&lt;/ref>\"}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"},\"body\":{\"id\":\"mw-reference-text-cite_note-a-1\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n<sup about=\"#mwt10\" class=\"mw-ref\" id=\"cite_ref-a_1-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"src\":\"&lt;ref name=\\\"a\\\">def&lt;/ref>\"}' data-mw='{\"name\":\"ref\",\"attrs\":{\"name\":\"a\"},\"body\":{\"html\":\"def\"}}'><a href=\"./Parser_test#cite_note-a-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup>\n</references></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt11\" data-parsoid='{\"dsr\":[86,86,0,0]}' data-mw='{\"name\":\"references\",\"attrs\":{},\"autoGenerated\":true}'><li about=\"#cite_note-a-1\" id=\"cite_note-a-1\" data-parsoid=\"{}\"><span rel=\"mw:referencedBy\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-a_1-0\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">1 </span></a><a href=\"./Parser_test#cite_ref-a_1-1\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">2 </span></a><a href=\"./Parser_test#cite_ref-a_1-2\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">3 </span></a></span> <span id=\"mw-reference-text-cite_note-a-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">abc</span></li></ol>",
        "wt2wt": "<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,71,0,0]}'><sup id=\"cite_ref-a_1-0\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[0,71,43,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-a-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-a-1\"},\"sa\":{\"href\":\"#cite_note-a-1\"},\"dsr\":[43,65,17,2]}'>[1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[73,398,32,6]}'>\n<ol data-parsoid='{\"dsr\":[106,390,0,0]}'><li data-parsoid='{\"dsr\":[106,390,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[108,169,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-a_1-0\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-a_1-0\"},\"sa\":{\"href\":\"#cite_ref-a_1-0\"},\"dsr\":[139,162,18,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[170,390,29,7]}'>abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\" data-parsoid='{\"stx\":\"html\",\"dsr\":[203,383,58,7]}'>Cite error: Invalid <code data-parsoid='{\"stx\":\"html\",\"dsr\":[281,316,6,7]}'><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[287,309,8,9]}'>&lt;ref></span></code> tag; name \"a\" defined multiple times with different content</span></span></li></ol>\n\n</div>",
        "html2wt": "<sup id=\"cite_ref-a_1-0\" class=\"reference\">[[#cite_note-a-1|[1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-a_1-0|↑]]</span> <span class=\"reference-text\">abc <span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code><nowiki><ref></nowiki></code> tag; name \"a\" defined multiple times with different content</span></span>\n\n</div>"
    },
    "Counters should be cleared after processing named <references group=\"…\">": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,26,0,0]}'>A <sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[2,26,15,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"g\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"g\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[g 1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" data-mw-group=\"g\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"group\":\"g\",\"dsr\":[28,52,24,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"g\"}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" data-mw-group=\"g\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">foo</span></li></ol>\n\n<p data-parsoid='{\"dsr\":[54,80,0,0]}'>B <sup about=\"#mwt9\" class=\"mw-ref\" id=\"cite_ref-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[56,80,15,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"g\"},\"body\":{\"id\":\"mw-reference-text-cite_note-2\"}}'><a href=\"./Parser_test#cite_note-2\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"g\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[g 1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" data-mw-group=\"g\" typeof=\"mw:Extension/references\" about=\"#mwt12\" data-parsoid='{\"group\":\"g\",\"dsr\":[82,106,24,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"g\"}}'><li about=\"#cite_note-2\" id=\"cite_note-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-2\" data-mw-group=\"g\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">bar</span></li></ol>",
        "html2html": "<p data-parsoid='{\"dsr\":[0,69,0,0]}'>A <sup id=\"cite_ref-1\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[2,69,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-1\"},\"sa\":{\"href\":\"#cite_note-1\"},\"dsr\":[41,63,15,2]}'>[g 1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[71,211,32,6]}'>\n<ol data-parsoid='{\"dsr\":[104,203,0,0]}'><li data-parsoid='{\"dsr\":[104,203,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[106,163,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-1\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-1\"},\"sa\":{\"href\":\"#cite_ref-1\"},\"dsr\":[137,156,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[164,203,29,7]}'>foo</span></li></ol>\n\n</div>\n<p data-parsoid='{\"dsr\":[212,281,0,0]}'>B <sup id=\"cite_ref-2\" class=\"reference\" data-parsoid='{\"stx\":\"html\",\"dsr\":[214,281,39,6]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_note-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_note-2\"},\"sa\":{\"href\":\"#cite_note-2\"},\"dsr\":[253,275,15,2]}'>[g 1]</a></sup></p>\n\n<div class=\"mw-references-wrap\" data-parsoid='{\"stx\":\"html\",\"dsr\":[283,423,32,6]}'>\n<ol data-parsoid='{\"dsr\":[316,415,0,0]}'><li data-parsoid='{\"dsr\":[316,415,1,0]}'><span class=\"mw-cite-backlink\" data-parsoid='{\"stx\":\"html\",\"dsr\":[318,375,31,7]}'><a rel=\"mw:WikiLink\" href=\"./Parser_test#cite_ref-2\" data-parsoid='{\"stx\":\"piped\",\"a\":{\"href\":\"./Parser_test#cite_ref-2\"},\"sa\":{\"href\":\"#cite_ref-2\"},\"dsr\":[349,368,14,2]}'>↑</a></span> <span class=\"reference-text\" data-parsoid='{\"stx\":\"html\",\"dsr\":[376,415,29,7]}'>bar</span></li></ol>\n\n</div>",
        "html2wt": "A <sup id=\"cite_ref-1\" class=\"reference\">[[#cite_note-1|[g 1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-1|↑]]</span> <span class=\"reference-text\">foo</span>\n\n</div>\nB <sup id=\"cite_ref-2\" class=\"reference\">[[#cite_note-2|[g 1]]]</sup>\n\n<div class=\"mw-references-wrap\">\n# <span class=\"mw-cite-backlink\">[[#cite_ref-2|↑]]</span> <span class=\"reference-text\">bar</span>\n\n</div>"
    },
    "T15673: <ref> with direction \"nonsense\", strip invalid dir attribute and shows error": {
        "wt2html": "<p data-parsoid='{\"dsr\":[0,30,0,0]}'><sup about=\"#mwt3\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[0,30,20,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"dir\":\"nonsense\"},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup></p>\n\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt6\" data-parsoid='{\"dsr\":[32,46,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">TEST</span></li></ol>",
        "html2wt": "<span class=\"error mw-ext-cite-error\" lang=\"en\" dir=\"ltr\">Cite error: Invalid <code>dir=\"nonsense\"</code>, must be <code>ltr</code> or <code>rtl</code></span>\n\n\n"
    },
    "Ref: 3. spaces in ref-names should be ignored": {
        "wt2wt": "A <ref name=\"x\">foo</ref>\nB <ref name=\"x\" />\nC <ref name=\"x\" />\n<references />",
        "html2wt": "A <ref name=\"x\">foo</ref>\nB <ref name=\"x\" />\nC <ref name=\"x\" />\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence": {
        "wt2wt": "A <ref><nowiki> foo {{echo|</nowiki></ref><nowiki> B C}}</nowiki>\n\n<references />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,65,0,0]}'>A <sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[2,42,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup><span typeof=\"mw:Nowiki\" data-parsoid='{\"dsr\":[42,65,8,9]}'> B C}}</span></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt10\" data-parsoid='{\"dsr\":[66,80,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\"> foo {{echo|</span></li></ol>",
        "html2wt": "A <ref><nowiki> foo {{echo|</nowiki></ref><nowiki> B C}}</nowiki>\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body": {
        "wt2wt": "A <ref> foo <!----></ref> B C\n<references />",
        "html2wt": "A <ref> foo <!----></ref> B C\n<references />"
    },
    "References: 9. Generate missing references list at the end": {
        "wt2wt": "A <ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>\n<references />\n<references group=\"inexistent\" />",
        "html2html": "<p data-parsoid='{\"dsr\":[0,52,0,0]}'>A <sup about=\"#mwt4\" class=\"mw-ref\" id=\"cite_ref-1\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[2,16,5,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{},\"body\":{\"id\":\"mw-reference-text-cite_note-1\"}}'><a href=\"./Parser_test#cite_note-1\" style=\"counter-reset: mw-Ref 1;\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[1]</span></a></sup> B <sup about=\"#mwt6\" class=\"mw-ref\" id=\"cite_ref-2\" rel=\"dc:references\" typeof=\"mw:Extension/ref\" data-parsoid='{\"dsr\":[19,52,24,6]}' data-mw='{\"name\":\"ref\",\"attrs\":{\"group\":\"inexistent\"},\"body\":{\"id\":\"mw-reference-text-cite_note-2\"}}'><a href=\"./Parser_test#cite_note-2\" style=\"counter-reset: mw-Ref 1;\" data-mw-group=\"inexistent\" data-parsoid=\"{}\"><span class=\"mw-reflink-text\" data-parsoid=\"{}\">[inexistent 1]</span></a></sup></p>\n<ol class=\"mw-references references\" typeof=\"mw:Extension/references\" about=\"#mwt9\" data-parsoid='{\"dsr\":[53,67,14,0]}' data-mw='{\"name\":\"references\",\"attrs\":{}}'><li about=\"#cite_note-1\" id=\"cite_note-1\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-1\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-1\" class=\"mw-reference-text\" data-parsoid=\"{}\">foo</span></li></ol>\n<ol class=\"mw-references references\" data-mw-group=\"inexistent\" typeof=\"mw:Extension/references\" about=\"#mwt12\" data-parsoid='{\"group\":\"inexistent\",\"dsr\":[68,101,33,0]}' data-mw='{\"name\":\"references\",\"attrs\":{\"group\":\"inexistent\"}}'><li about=\"#cite_note-2\" id=\"cite_note-2\" data-parsoid=\"{}\"><a href=\"./Parser_test#cite_ref-2\" data-mw-group=\"inexistent\" rel=\"mw:referencedBy\" data-parsoid=\"{}\"><span class=\"mw-linkback-text\" data-parsoid=\"{}\">↑ </span></a> <span id=\"mw-reference-text-cite_note-2\" class=\"mw-reference-text\" data-parsoid=\"{}\">bar</span></li></ol>",
        "html2wt": "A <ref>foo</ref> B <ref group=\"inexistent\">bar</ref>\n<references />\n<references group=\"inexistent\" />"
    },
    "Ref: 5. body should accept generic wikitext": {
        "html2wt": "A <ref> This is a '''[[bolded link]]''' and this is a {{echo|transclusion}}\n</ref>\n\n<references />"
    },
    "Simple <ref>, no <references/> [2,0,0]": {
        "selser": "22oxk8\n\nWikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>"
    },
    "Simple <ref>, no <references/> [3,0,0]": {
        "selser": "\n"
    },
    "Simple <ref>, no <references/> [4,0,0]": {
        "selser": "fp5wbv\n"
    },
    "Simple <ref>, no <references/> [[3,0],0,0]": {
        "selser": "<ref>Proceeds of Rockology, vol. XXI</ref>\n"
    },
    "Simple <ref>, no <references/> [[4,0],2,0]": {
        "selser": "mk977p<ref>Proceeds of Rockology, vol. XXI</ref>\n\neyus7i\n"
    },
    "Simple <ref>, no <references/> [4,4,0]": {
        "selser": "1ydfc9r\n\n1qrllio"
    },
    "Simple <ref>, no <references/> [3,3,0]": {
        "selser": ""
    },
    "Simple <ref>, no <references/> [3,4,0]": {
        "selser": "o3fqpy"
    },
    "Simple <ref>, no <references/> [[2,0],0,0]": {
        "selser": "f6wp9uWikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>\n"
    },
    "Simple <ref>, no <references/> [3,2,0]": {
        "selser": "1vqvhch\n"
    },
    "Simple <ref>, no <references/> [1,2,0]": {
        "selser": "Wikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>\n\n1ke31cw\n"
    },
    "Simple <ref>, no <references/> [[4,0],4,0]": {
        "selser": "1rj81lf<ref>Proceeds of Rockology, vol. XXI</ref>\n\ncwh7xl"
    },
    "Simple <ref>, no <references/> [1,4,0]": {
        "selser": "Wikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>\n\nxukyru"
    },
    "Simple <ref>, no <references/> [4,2,0]": {
        "selser": "1whmhxv\n\nku22uk\n"
    },
    "Simple <ref>, no <references/> [0,4,0]": {
        "selser": "Wikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>\n\n188fvja"
    },
    "Simple <ref>, no <references/> [[4,0],0,0]": {
        "selser": "1v0r3te<ref>Proceeds of Rockology, vol. XXI</ref>\n"
    },
    "Simple <ref>, no <references/> [0,3,0]": {
        "selser": "Wikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>"
    },
    "Simple <ref>, no <references/> [[3,0],3,0]": {
        "selser": "<ref>Proceeds of Rockology, vol. XXI</ref>"
    },
    "Simple <ref>, no <references/> [1,0,0]": {
        "selser": "Wikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>\n"
    },
    "Simple <ref>, no <references/> [0,2,0]": {
        "selser": "Wikipedia rocks!<ref>Proceeds of Rockology, vol. XXI</ref>\n\newkf4g\n"
    },
    "<ref> with a simple template [[4,0],0,0]": {
        "selser": "yhdv7u<ref>{{simple template}}</ref>\n\n<references/>"
    },
    "<ref> with a simple template [1,0,0]": {
        "selser": "Templating<ref>{{simple template}}</ref>\n\n<references/>"
    },
    "<ref> with a simple template [0,2,0]": {
        "selser": "Templating<ref>{{simple template}}</ref>\n\nii244g\n\n<references/>"
    },
    "<ref> with a simple template [3,4,0]": {
        "selser": "18f5fp7<references/>"
    },
    "<ref> with a simple template [3,0,0]": {
        "selser": "\n<references/>"
    },
    "<ref> with a simple template [4,0,0]": {
        "selser": "1xjeoth\n\n<references/>"
    },
    "<ref> with a simple template [[2,0],0,0]": {
        "selser": "an2be4Templating<ref>{{simple template}}</ref>\n\n<references/>"
    },
    "<ref> with a simple template [1,4,0]": {
        "selser": "Templating<ref>{{simple template}}</ref>\n\np6ivyn<references/>"
    },
    "<ref> with a simple template [[2,0],4,0]": {
        "selser": "xwhqitTemplating<ref>{{simple template}}</ref>\n\n1uisoil<references/>"
    },
    "<ref> with a simple template [[3,0],0,0]": {
        "selser": "<ref>{{simple template}}</ref>\n\n<references/>"
    },
    "<ref> with a simple template [2,0,0]": {
        "selser": "149lvku\n\nTemplating<ref>{{simple template}}</ref>\n\n<references/>"
    },
    "<ref> with a simple template [[4,0],4,0]": {
        "selser": "1uffftj<ref>{{simple template}}</ref>\n\nbzckp6<references/>"
    },
    "<ref> with a simple template [2,4,0]": {
        "selser": "1tnp4p2\n\nTemplating<ref>{{simple template}}</ref>\n\n168wp9b<references/>"
    },
    "<ref> with a simple template [[3,0],3,0]": {
        "selser": "<ref>{{simple template}}</ref><references/>"
    },
    "<ref> with a simple template [0,3,0]": {
        "selser": "Templating<ref>{{simple template}}</ref><references/>"
    },
    "<ref> with a simple template [[3,0],2,0]": {
        "selser": "<ref>{{simple template}}</ref>\n\n31w47h\n\n<references/>"
    },
    "<ref> with a simple template [4,3,0]": {
        "selser": "1qi1i08<references/>"
    },
    "<ref> with a simple template [4,4,0]": {
        "selser": "2dia5h\n\nf6y4yv<references/>"
    },
    "<ref> with a simple template [1,2,0]": {
        "selser": "Templating<ref>{{simple template}}</ref>\n\ncg6fr2\n\n<references/>"
    },
    "<ref> with a simple template [3,2,0]": {
        "selser": "1a45dhl\n\n<references/>"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [0,3,0]": {
        "selser": "{{REVISIONID}}<ref>elite</ref>"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [4,0,0]": {
        "selser": "gqyiqf\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [1,2,0]": {
        "selser": "{{REVISIONID}}<ref>elite</ref>\n\n1a6otiq\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [2,2,0]": {
        "selser": "7idxf8\n\n{{REVISIONID}}<ref>elite</ref>\n\n1dburhc\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [3,0,0]": {
        "selser": "\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [2,0,0]": {
        "selser": "1v8qufh\n\n{{REVISIONID}}<ref>elite</ref>"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [0,4,0]": {
        "selser": "{{REVISIONID}}<ref>elite</ref>\n\nhr3unp"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [4,3,0]": {
        "selser": "1d8jkif"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [1,4,0]": {
        "selser": "{{REVISIONID}}<ref>elite</ref>\n\n1s3icyj"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [0,2,0]": {
        "selser": "{{REVISIONID}}<ref>elite</ref>\n\nrjzpcq\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [1,3,0]": {
        "selser": "{{REVISIONID}}<ref>elite</ref>"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [3,3,0]": {
        "selser": ""
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [1,0,0]": {
        "selser": "{{REVISIONID}}<ref>elite</ref>\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [3,4,0]": {
        "selser": "7uvu41"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [2,4,0]": {
        "selser": "1ndy63i\n\n{{REVISIONID}}<ref>elite</ref>\n\n15wnw26"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [4,4,0]": {
        "selser": "e67fty\n\ns7z72f"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [4,2,0]": {
        "selser": "1kjcdbq\n\n1t30wom\n"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [2,3,0]": {
        "selser": "11e8rkj\n\n{{REVISIONID}}<ref>elite</ref>"
    },
    "{{REVISIONID}} on page with <ref> (bug 6299) [3,2,0]": {
        "selser": "1ljugez\n"
    },
    "Blank ref followed by ref with content [0,4,1,3,0]": {
        "selser": "<ref name=\"blank\" />\n\n14bnq08\n\n<ref name=\"blank\">content</ref>\n\n<references />"
    },
    "Erroneous refs [0,0,4,2,4,0,0,3,0,0,0,0,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\nwie687\n\n1u7xv04\n\n1pm36tv\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" />\n\n<references />"
    },
    "Erroneous refs [3,2,0,0,1,2,0,0,1,0,0,2,0]": {
        "selser": "1tb8tca\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\nl49cv6\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" />ql4aqu\n\n<references />"
    },
    "Erroneous refs [0,3,0,0,0,2,0,0,1,0,0,3,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\n1if3p11\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" /><references />"
    },
    "Erroneous refs [2,0,4,3,4,4,0,0,0,3,0,0,0]": {
        "selser": "1s759zl\n\n<ref name=\"0\">Zero</ref>\n\n1qgybr7\n\n1mfflfd\n\nruzy1u\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" /><references name=\"quasit\" />\n\n<references />"
    },
    "Erroneous refs [0,4,0,3,0,0,0,0,0,3,0,0,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\n1lc0182\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" /><references name=\"quasit\" />\n\n<references />"
    },
    "Erroneous refs [3,0,0,0,0,4,0,0,3,0,0,2,0]": {
        "selser": "\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\nmg82zd\n\n<ref name=\"foo\" name=\"bar\" />\n\n<references name=\"quasit\" />xefmhr\n\n<references />"
    },
    "Erroneous refs [3,2,4,2,4,0,0,2,3,0,0,4,0]": {
        "selser": "im3he0\n\njws5le\n\ngf9tte\n\nsqickf\n\n<ref name=\"foo\" name=\"bar\" />\n\n14jiq7o\n\n<references name=\"quasit\" />1i0xhb<references />"
    },
    "Erroneous refs [3,0,4,2,0,2,0,0,0,0,0,4,0]": {
        "selser": "\n1to8jou\n\n1q4t40z\n\n<ref />\n\nh1kd4g\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" />2s6rnl<references />"
    },
    "Erroneous refs [0,0,1,0,0,4,0,3,1,2,0,4,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\nermh8y\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n1lc73ob\n\n<references name=\"quasit\" />mzul4n<references />"
    },
    "Erroneous refs [1,0,0,3,1,3,1,0,2,0,0,4,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\n<ref name=\"foo\" name=\"bar\" />\n\ngmbpkw\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" />1xfh5g7<references />"
    },
    "Erroneous refs [2,0,3,2,0,0,2,3,4,0,0,0,0]": {
        "selser": "mucbqr\n\n<ref name=\"0\">Zero</ref>\n\ni8peub\n\n<ref />\n\n1px26o6\n\n<ref name=\"foo\" name=\"bar\" />\n\n18pbxhl\n\n<references name=\"quasit\" />\n\n<references />"
    },
    "Erroneous refs [2,0,2,2,0,4,2,0,0,3,0,3,0]": {
        "selser": "sqk5eb\n\n<ref name=\"0\">Zero</ref>\n\n4v5cn6\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n1v6r6u9\n\n<ref />\n\n1nafanq\n\nc5qatn\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" /><references name=\"quasit\" /><references />"
    },
    "Erroneous refs [4,4,4,0,0,0,0,3,1,2,0,0,0]": {
        "selser": "1devhdy\n\n1o3vfrh\n\n1hbzkdi\n\n<ref />\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\nqgk2ub\n\n<references name=\"quasit\" />\n\n<references />"
    },
    "Erroneous refs [0,0,2,0,2,2,2,4,0,0,0,2,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\n154g1s7\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n1lzjdgw\n\n<ref />\n\nmycz92\n\n1phfm0r\n\n<ref name=\"foo\" name=\"bar\" />\n\n18223mm\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" />odszxr\n\n<references />"
    },
    "Erroneous refs [0,0,1,0,0,0,0,0,0,4,0,0,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n1tejkzu<references name=\"quasit\" />\n\n<references />"
    },
    "Erroneous refs [0,0,0,3,0,2,2,3,1,0,0,2,0]": {
        "selser": "<ref name=\"0\">Zero</ref>\n\n<ref>Also zero, but differently! (Normal ref)</ref>\n\n<ref />\n\narbfc9\n\n1nbyl9p\n\n<ref name=\"foo\" name=\"bar\" />\n\n<ref name=\"blankwithnoreference\" />\n\n<references name=\"quasit\" />19hld02\n\n<references />"
    },
    "A follow=\"…\" before its parent is not merged [[0,2,0],2,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>1jk73i0\n<ref name=\"theName\">theValue</ref>\n\n1ipb68z\n"
    },
    "A follow=\"…\" before its parent is not merged [1,4,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>\n\n1rr44om"
    },
    "A follow=\"…\" before its parent is not merged [[0,3,0],0,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref><ref name=\"theName\">theValue</ref>\n"
    },
    "A follow=\"…\" before its parent is not merged [2,0,0]": {
        "selser": "2hg0is\n\n<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>"
    },
    "A follow=\"…\" before its parent is not merged [[0,4,0],2,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>7zu2s6<ref name=\"theName\">theValue</ref>\n\n1pvaj0j\n"
    },
    "A follow=\"…\" before its parent is not merged [3,2,0]": {
        "selser": "19mn6t7\n"
    },
    "A follow=\"…\" before its parent is not merged [4,0,0]": {
        "selser": "t2kv6y\n"
    },
    "A follow=\"…\" before its parent is not merged [[0,3,0],2,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref><ref name=\"theName\">theValue</ref>\n\nbmvpjy\n"
    },
    "A follow=\"…\" before its parent is not merged [[0,2,0],0,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>dyvx0y\n<ref name=\"theName\">theValue</ref>\n"
    },
    "A follow=\"…\" before its parent is not merged [1,3,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>"
    },
    "A follow=\"…\" before its parent is not merged [[0,2,0],4,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>1wahpmn\n<ref name=\"theName\">theValue</ref>\n\n16ylob5"
    },
    "A follow=\"…\" before its parent is not merged [[0,4,0],4,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>qhjpvb<ref name=\"theName\">theValue</ref>\n\n1q1oqrf"
    },
    "A follow=\"…\" before its parent is not merged [4,2,0]": {
        "selser": "v0bqr3\n\n3erpj3\n"
    },
    "A follow=\"…\" before its parent is not merged [[0,4,0],0,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>2n7ftu<ref name=\"theName\">theValue</ref>\n"
    },
    "A follow=\"…\" before its parent is not merged [4,3,0]": {
        "selser": "hxj896"
    },
    "A follow=\"…\" before its parent is not merged [3,3,0]": {
        "selser": ""
    },
    "A follow=\"…\" before its parent is not merged [1,0,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>\n"
    },
    "A follow=\"…\" before its parent is not merged [2,3,0]": {
        "selser": "1sko34u\n\n<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>"
    },
    "A follow=\"…\" before its parent is not merged [0,4,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>\n\n1hac3q7"
    },
    "A follow=\"…\" before its parent is not merged [0,2,0]": {
        "selser": "<ref follow=\"theName\">theFollows</ref>\n<ref name=\"theName\">theValue</ref>\n\nvrorh6\n"
    },
    "Valid follow=\"…\" after it's parent [1,3,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>"
    },
    "Valid follow=\"…\" after it's parent [[0,4,0],2,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>1gxmxy4<ref follow=\"theName\">theFollows</ref>\n\n1gkscyd\n"
    },
    "Valid follow=\"…\" after it's parent [1,2,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>\n\n18p21yi\n"
    },
    "Valid follow=\"…\" after it's parent [4,0,0]": {
        "selser": "8hytwt\n"
    },
    "Valid follow=\"…\" after it's parent [2,0,0]": {
        "selser": "1jsmz67\n\n<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>"
    },
    "Valid follow=\"…\" after it's parent [[0,3,0],4,0]": {
        "selser": "<ref name=\"theName\">theValue</ref><ref follow=\"theName\">theFollows</ref>\n\n1jmsk8y"
    },
    "Valid follow=\"…\" after it's parent [[0,2,0],2,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>1kj55ll\n<ref follow=\"theName\">theFollows</ref>\n\nxralij\n"
    },
    "Valid follow=\"…\" after it's parent [[0,4,0],0,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>1m0d020<ref follow=\"theName\">theFollows</ref>\n"
    },
    "Valid follow=\"…\" after it's parent [4,3,0]": {
        "selser": "1u5yfwr"
    },
    "Valid follow=\"…\" after it's parent [0,4,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>\n\n87nuf6"
    },
    "Valid follow=\"…\" after it's parent [[0,3,0],0,0]": {
        "selser": "<ref name=\"theName\">theValue</ref><ref follow=\"theName\">theFollows</ref>\n"
    },
    "Valid follow=\"…\" after it's parent [1,0,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>\n"
    },
    "Valid follow=\"…\" after it's parent [[0,3,0],2,0]": {
        "selser": "<ref name=\"theName\">theValue</ref><ref follow=\"theName\">theFollows</ref>\n\nqoxp59\n"
    },
    "Valid follow=\"…\" after it's parent [4,2,0]": {
        "selser": "5v0sli\n\n1blkadj\n"
    },
    "Valid follow=\"…\" after it's parent [1,4,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>\n\n16ir6kk"
    },
    "Valid follow=\"…\" after it's parent [[0,2,0],3,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>lhogv5\n<ref follow=\"theName\">theFollows</ref>"
    },
    "Valid follow=\"…\" after it's parent [[0,2,0],0,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>yth1p4\n<ref follow=\"theName\">theFollows</ref>\n"
    },
    "Valid follow=\"…\" after it's parent [[0,4,0],3,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>1k6xn5<ref follow=\"theName\">theFollows</ref>"
    },
    "Valid follow=\"…\" after it's parent [4,4,0]": {
        "selser": "jiwocx\n\nfipsws"
    },
    "Valid follow=\"…\" after it's parent [0,2,0]": {
        "selser": "<ref name=\"theName\">theValue</ref>\n<ref follow=\"theName\">theFollows</ref>\n\nstb6p9\n"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [1,0,0,0,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n<references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [3,2,0,3,0]": {
        "selser": "1qr3j0\n<references group=\"g\" /><references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [3,2,0,4,0]": {
        "selser": "45sy47\n<references group=\"g\" />1359xbg<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [[0,4,0],0,0,3,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>gewuta<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n<references group=\"g\" /><references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [[0,3,0],0,0,4,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref><ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n<references group=\"g\" />6ogx1v<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [1,2,0,4,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n\n13r72fg\n<references group=\"g\" />1bj8t72<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [3,0,0,2,0]": {
        "selser": "\n<references group=\"g\" />10yc0dz\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [0,4,0,0,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n\n1u7wvvx<references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [2,3,0,0,0]": {
        "selser": "41izrh\n\n<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref><references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [2,0,0,0,0]": {
        "selser": "1b2aniz\n\n<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n<references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [1,3,0,0,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref><references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [[0,3,0],4,0,0,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref><ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n\n278f5p<references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [0,0,0,3,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n<references group=\"g\" /><references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [0,0,0,4,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n<references group=\"g\" />10g4zfd<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [0,4,0,2,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n\njeg3wc<references group=\"g\" />3bymmv\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [1,3,0,3,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref><references group=\"g\" /><references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [[0,3,0],0,0,0,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref><ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n<references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [[0,2,0],2,0,0,0]": {
        "selser": "<ref group=\"g\" name=\"n1\">in group g</ref>18om0zz\n<ref group=\" g \" name=\" n2 \">in group \" g \"</ref>\n\n1kgbgcl\n<references group=\"g\" />\n<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [3,4,0,4,0]": {
        "selser": "15yv274<references group=\"g\" />cmki4x<references group=\" g \" />"
    },
    "Attributes are trimmed by the parser, see Sanitizer::decodeTagAttributes() [3,3,0,3,0]": {
        "selser": "<references group=\"g\" /><references group=\" g \" />"
    },
    "<ref> defined in <references> called with #tag [0,0,0,4,0]": {
        "selser": "<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}\n\n1h4si2i"
    },
    "<ref> defined in <references> called with #tag [1,3,0,3,0]": {
        "selser": "<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [0,4,3,0,0]": {
        "selser": "<ref name=\"foo\" />\n\n12vvoew\n"
    },
    "<ref> defined in <references> called with #tag [0,3,4,0,0]": {
        "selser": "<ref name=\"foo\" />\n\n167l5c9\n"
    },
    "<ref> defined in <references> called with #tag [3,4,0,0,0]": {
        "selser": "9164cv\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [1,0,4,0,0]": {
        "selser": "<ref name=\"foo\" />\n\ncecap3\n"
    },
    "<ref> defined in <references> called with #tag [2,0,1,4,0]": {
        "selser": "11031sy\n\n<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}\n\nugd1r0"
    },
    "<ref> defined in <references> called with #tag [0,4,0,0,0]": {
        "selser": "<ref name=\"foo\" />\n\nsm4tm\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [1,2,0,0,0]": {
        "selser": "<ref name=\"foo\" />\n\nv6hvl3\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [4,2,0,0,0]": {
        "selser": "2if78t\n\n54patw\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [4,0,3,3,0]": {
        "selser": "ncj63m\n\n"
    },
    "<ref> defined in <references> called with #tag [4,2,3,4,0]": {
        "selser": "1do4lk2\n\nwzvw8b\n\n52ply3"
    },
    "<ref> defined in <references> called with #tag [0,3,3,3,0]": {
        "selser": "<ref name=\"foo\" />"
    },
    "<ref> defined in <references> called with #tag [3,2,0,0,0]": {
        "selser": "1gurfwg\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [0,3,0,3,0]": {
        "selser": "<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [4,0,1,4,0]": {
        "selser": "1qcd0j4\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}\n\n7kvuk1"
    },
    "<ref> defined in <references> called with #tag [0,0,0,3,0]": {
        "selser": "<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}"
    },
    "<ref> defined in <references> called with #tag [0,0,0,2,0]": {
        "selser": "<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}\n\nd6424z\n"
    },
    "<ref> defined in <references> called with #tag [2,0,1,0,0]": {
        "selser": "15tsmjq\n\n<ref name=\"foo\" />\n\n{{#tag:references|\n<ref name=\"foo\">BAR</ref>\n}}\n"
    },
    "<ref> defined in <references> called with #tag [2,3,3,0,0]": {
        "selser": "1tof2ch\n\n<ref name=\"foo\" />\n"
    },
    "<ref> defined in <references> error conditions [0,0,0,4,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>xwwv1f"
    },
    "<ref> defined in <references> error conditions [2,4,0,2,0]": {
        "selser": "1e4nuqg\n\n<ref name=\"foo\" group=\"2\" />\n\n1lv5nxu<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>y2rzoz\n"
    },
    "<ref> defined in <references> error conditions [1,0,0,3,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [2,3,0,3,0]": {
        "selser": "gmrtqg\n\n<ref name=\"foo\" group=\"2\" /><references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [2,2,0,2,0]": {
        "selser": "tjj9iv\n\n<ref name=\"foo\" group=\"2\" />\n\n1asq9cg\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>dnnsic\n"
    },
    "<ref> defined in <references> error conditions [0,0,0,2,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>7erqrm\n"
    },
    "<ref> defined in <references> error conditions [1,4,0,2,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\n1k1tqkf<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>t5vwxu\n"
    },
    "<ref> defined in <references> error conditions [2,0,0,2,0]": {
        "selser": "9i1d0c\n\n<ref name=\"foo\" group=\"2\" />\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>1sjizbz\n"
    },
    "<ref> defined in <references> error conditions [0,3,0,3,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" /><references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [3,2,0,0,0]": {
        "selser": "1sysz5p\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [2,3,0,0,0]": {
        "selser": "11ut82n\n\n<ref name=\"foo\" group=\"2\" /><references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [0,0,0,3,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [4,4,0,0,0]": {
        "selser": "17wdbzr\n\n1no9ybg<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [4,0,0,0,0]": {
        "selser": "ib2nzk\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [0,4,0,3,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\n169w5bv<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [0,3,0,0,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" /><references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [1,3,0,3,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" /><references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [0,2,0,0,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\nki8q1g\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>"
    },
    "<ref> defined in <references> error conditions [3,2,0,2,0]": {
        "selser": "dreblk\n\n<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>t4hd8y\n"
    },
    "<ref> defined in <references> error conditions [0,4,0,4,0]": {
        "selser": "<ref name=\"foo\" group=\"2\" />\n\nim4cb1<references group=\"2\">\n<ref name=\"foo\" />\n<ref name=\"unused\">BAR</ref>\n<ref name=\"foo\" group=\"1\">bad group</ref>\n<ref>BAR BAR</ref>\n</references>ehu3w3"
    },
    "Bug 13073 regression check: wrapped <references> [0,3,3]": {
        "selser": "<ref>\nfoo\n</ref>"
    },
    "Bug 13073 regression check: wrapped <references> [1,0,3]": {
        "selser": "<ref>\nfoo\n</ref>\n"
    },
    "Bug 13073 regression check: wrapped <references> [2,0,3]": {
        "selser": "1n3of6i\n\n<ref>\nfoo\n</ref>\n"
    },
    "Bug 13073 regression check: wrapped <references> [0,0,4]": {
        "selser": "<ref>\nfoo\n</ref>\n\n193v7o9"
    },
    "<ref> with no name and no content. [[3,0],4,0]": {
        "selser": "<ref></ref>\n\naljbiu"
    },
    "<ref> with no name and no content. [0,2,0]": {
        "selser": "Bla.<ref></ref>\n\n14xs0of\n"
    },
    "<ref> with no name and no content. [2,0,0]": {
        "selser": "1hylpiu\n\nBla.<ref></ref>"
    },
    "<ref> with no name and no content. [1,3,0]": {
        "selser": "Bla.<ref></ref>"
    },
    "<ref> with no name and no content. [4,0,0]": {
        "selser": "1ag54if\n"
    },
    "<ref> with no name and no content. [2,3,0]": {
        "selser": "93ehjf\n\nBla.<ref></ref>"
    },
    "<ref> with no name and no content. [3,2,0]": {
        "selser": "1oc7zbb\n"
    },
    "<ref> with no name and no content. [1,4,0]": {
        "selser": "Bla.<ref></ref>\n\n6fzo6o"
    },
    "<ref> with no name and no content. [2,2,0]": {
        "selser": "1s6yag3\n\nBla.<ref></ref>\n\n1cx4dwp\n"
    },
    "<ref> with no name and no content. [3,0,0]": {
        "selser": "\n"
    },
    "<ref> with no name and no content. [1,0,0]": {
        "selser": "Bla.<ref></ref>\n"
    },
    "<ref> with no name and no content. [[3,0],0,0]": {
        "selser": "<ref></ref>\n"
    },
    "<ref> with no name and no content. [0,3,0]": {
        "selser": "Bla.<ref></ref>"
    },
    "<ref> with no name and no content. [1,2,0]": {
        "selser": "Bla.<ref></ref>\n\n1jtc3vu\n"
    },
    "<ref> with no name and no content. [[3,0],3,0]": {
        "selser": "<ref></ref>"
    },
    "<ref> with no name and no content. [[2,0],3,0]": {
        "selser": "1rtekglBla.<ref></ref>"
    },
    "<ref> with no name and no content. [0,4,0]": {
        "selser": "Bla.<ref></ref>\n\n185h7co"
    },
    "<ref> with no name and no content. [4,2,0]": {
        "selser": "se82hw\n\n33a34c\n"
    },
    "<ref> with no name and no content. [2,4,0]": {
        "selser": "z3ke50\n\nBla.<ref></ref>\n\n1th90k5"
    },
    "<ref> with no name and no content. [[4,0],0,0]": {
        "selser": "2t6kf2<ref></ref>\n"
    },
    "<ref> with an empty-string name parameter and no content. [0,4,0]": {
        "selser": "Bla.<ref name=\"\"> </ref>\n\ncragod"
    },
    "<ref> with an empty-string name parameter and no content. [2,3,0]": {
        "selser": "1bfhlah\n\nBla.<ref name=\"\"> </ref>"
    },
    "<ref> with an empty-string name parameter and no content. [[3,0],3,0]": {
        "selser": "<ref name=\"\"> </ref>"
    },
    "<ref> with an empty-string name parameter and no content. [[4,0],2,0]": {
        "selser": "1l87kh<ref name=\"\"> </ref>\n\n14ep8s4\n"
    },
    "<ref> with an empty-string name parameter and no content. [4,0,0]": {
        "selser": "nhkn7i\n"
    },
    "<ref> with an empty-string name parameter and no content. [3,0,0]": {
        "selser": "\n"
    },
    "<ref> with an empty-string name parameter and no content. [0,3,0]": {
        "selser": "Bla.<ref name=\"\"> </ref>"
    },
    "<ref> with an empty-string name parameter and no content. [1,0,0]": {
        "selser": "Bla.<ref name=\"\"> </ref>\n"
    },
    "<ref> with an empty-string name parameter and no content. [[4,0],4,0]": {
        "selser": "nt8qav<ref name=\"\"> </ref>\n\nqwx5p0"
    },
    "<ref> with an empty-string name parameter and no content. [2,0,0]": {
        "selser": "pm4jgd\n\nBla.<ref name=\"\"> </ref>"
    },
    "<ref> with an empty-string name parameter and no content. [[2,0],0,0]": {
        "selser": "zfrb64Bla.<ref name=\"\"> </ref>\n"
    },
    "<ref> with an empty-string name parameter and no content. [3,2,0]": {
        "selser": "1q8hcjb\n"
    },
    "<ref> with an empty-string name parameter and no content. [[2,0],2,0]": {
        "selser": "12b9kmzBla.<ref name=\"\"> </ref>\n\nibwpgg\n"
    },
    "<ref> with an empty-string name parameter and no content. [3,4,0]": {
        "selser": "ry9n5g"
    },
    "<ref> with an empty-string name parameter and no content. [[3,0],4,0]": {
        "selser": "<ref name=\"\"> </ref>\n\nchu8io"
    },
    "<ref> with an empty-string name parameter and no content. [3,3,0]": {
        "selser": ""
    },
    "<ref> with an empty-string name parameter and no content. [0,2,0]": {
        "selser": "Bla.<ref name=\"\"> </ref>\n\n6wbvmv\n"
    },
    "<ref> with an empty-string name parameter and no content. [2,4,0]": {
        "selser": "qmsgk4\n\nBla.<ref name=\"\"> </ref>\n\n1i5zluc"
    },
    "<ref> with an empty-string name parameter and no content. [4,3,0]": {
        "selser": "10hsojr"
    },
    "<ref> with an empty-string name parameter and no content. [1,4,0]": {
        "selser": "Bla.<ref name=\"\"> </ref>\n\npot8e9"
    },
    "<ref> with a non-empty name parameter and no content. [1,3,0]": {
        "selser": "Bla.<ref name=\"void\"> </ref>"
    },
    "<ref> with a non-empty name parameter and no content. [4,0,0]": {
        "selser": "jp9ix3\n"
    },
    "<ref> with a non-empty name parameter and no content. [3,2,0]": {
        "selser": "1svy1oh\n"
    },
    "<ref> with a non-empty name parameter and no content. [[2,0],2,0]": {
        "selser": "11rp2iBla.<ref name=\"void\"> </ref>\n\npe7hho\n"
    },
    "<ref> with a non-empty name parameter and no content. [0,4,0]": {
        "selser": "Bla.<ref name=\"void\"> </ref>\n\nvvz0q"
    },
    "<ref> with a non-empty name parameter and no content. [[4,0],3,0]": {
        "selser": "kmx7u5<ref name=\"void\"> </ref>"
    },
    "<ref> with a non-empty name parameter and no content. [1,0,0]": {
        "selser": "Bla.<ref name=\"void\"> </ref>\n"
    },
    "<ref> with a non-empty name parameter and no content. [2,3,0]": {
        "selser": "kzgx2m\n\nBla.<ref name=\"void\"> </ref>"
    },
    "<ref> with a non-empty name parameter and no content. [2,0,0]": {
        "selser": "gx19mi\n\nBla.<ref name=\"void\"> </ref>"
    },
    "<ref> with a non-empty name parameter and no content. [0,2,0]": {
        "selser": "Bla.<ref name=\"void\"> </ref>\n\n1kt4uns\n"
    },
    "<ref> with a non-empty name parameter and no content. [3,0,0]": {
        "selser": "\n"
    },
    "<ref> with a non-empty name parameter and no content. [1,4,0]": {
        "selser": "Bla.<ref name=\"void\"> </ref>\n\n11qwwkk"
    },
    "<ref> with a non-empty name parameter and no content. [[3,0],2,0]": {
        "selser": "<ref name=\"void\"> </ref>\n\n1km8swu\n"
    },
    "<ref> with a non-empty name parameter and no content. [0,3,0]": {
        "selser": "Bla.<ref name=\"void\"> </ref>"
    },
    "<ref> with a non-empty name parameter and no content. [2,4,0]": {
        "selser": "1k2cjb5\n\nBla.<ref name=\"void\"> </ref>\n\n1yfo43q"
    },
    "<ref> with a non-empty name parameter and no content. [[2,0],4,0]": {
        "selser": "15mpccsBla.<ref name=\"void\"> </ref>\n\n1sczn67"
    },
    "<ref> with a non-empty name parameter and no content. [4,3,0]": {
        "selser": "ii7idw"
    },
    "<ref> with a non-empty name parameter and no content. [3,4,0]": {
        "selser": "pgzdkr"
    },
    "<ref> with a non-empty name parameter and no content. [[2,0],3,0]": {
        "selser": "1er9bi7Bla.<ref name=\"void\"> </ref>"
    },
    "<ref> with a non-empty name parameter and no content. [[2,0],0,0]": {
        "selser": "6o8ppyBla.<ref name=\"void\"> </ref>\n"
    },
    "Multiple definition (inside {{#tag:references}}) [2,4,0]": {
        "selser": "1ak5bwa\n\n<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\n192gckh"
    },
    "Multiple definition (inside {{#tag:references}}) [1,3,0]": {
        "selser": "<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}"
    },
    "Multiple definition (inside {{#tag:references}}) [1,2,0]": {
        "selser": "<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\nttjl1f\n"
    },
    "Multiple definition (inside {{#tag:references}}) [0,2,0]": {
        "selser": "<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\n1i3su9c\n"
    },
    "Multiple definition (inside {{#tag:references}}) [3,0,0]": {
        "selser": "\n"
    },
    "Multiple definition (inside {{#tag:references}}) [[0,3,0],2,0]": {
        "selser": "<ref name=\"a\" />{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\n1knlm1i\n"
    },
    "Multiple definition (inside {{#tag:references}}) [4,2,0]": {
        "selser": "14ns6pm\n\ntqdisa\n"
    },
    "Multiple definition (inside {{#tag:references}}) [0,4,0]": {
        "selser": "<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\n16wo0on"
    },
    "Multiple definition (inside {{#tag:references}}) [2,2,0]": {
        "selser": "1w4f57w\n\n<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\n1vypyz4\n"
    },
    "Multiple definition (inside {{#tag:references}}) [3,4,0]": {
        "selser": "1xmw23j"
    },
    "Multiple definition (inside {{#tag:references}}) [[0,3,0],0,0]": {
        "selser": "<ref name=\"a\" />{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n"
    },
    "Multiple definition (inside {{#tag:references}}) [3,2,0]": {
        "selser": "1g45yoi\n"
    },
    "Multiple definition (inside {{#tag:references}}) [[0,2,0],4,0]": {
        "selser": "<ref name=\"a\" />1devim1\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\nvuvipy"
    },
    "Multiple definition (inside {{#tag:references}}) [1,0,0]": {
        "selser": "<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n"
    },
    "Multiple definition (inside {{#tag:references}}) [[0,4,0],0,0]": {
        "selser": "<ref name=\"a\" />l03o37{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n"
    },
    "Multiple definition (inside {{#tag:references}}) [4,3,0]": {
        "selser": "j6hev7"
    },
    "Multiple definition (inside {{#tag:references}}) [[0,2,0],0,0]": {
        "selser": "<ref name=\"a\" />1pv754e\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n"
    },
    "Multiple definition (inside {{#tag:references}}) [4,0,0]": {
        "selser": "37odle\n"
    },
    "Multiple definition (inside {{#tag:references}}) [2,3,0]": {
        "selser": "1lt4v82\n\n<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}"
    },
    "Multiple definition (inside {{#tag:references}}) [1,4,0]": {
        "selser": "<ref name=\"a\" />\n{{#tag:references|\n<ref name=\"a\">abc</ref>\n<ref name=\"a\">def</ref>\n}}\n\n1nqe8vd"
    },
    "Ref: 3. spaces in ref-names should be ignored [[0,0,2,0,3,0],0,0]": {
        "selser": "A <ref name=\"x\">foo</ref>bgo09a\nB <ref name=\" x \" /><ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[0,0,4,0,2,0],0,0]": {
        "selser": "A <ref name=\"x\">foo</ref>zn8msh<ref name=\" x \" />c5u3nz\nC <ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[0,0,3,0,0,0],3,0]": {
        "selser": "A <ref name=\"x\">foo</ref><ref name=\" x \" />\nC <ref name= x  /><references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[4,0,3,0,3,0],0,0]": {
        "selser": "u3w7pb<ref name=\"x\">foo</ref><ref name=\" x \" /><ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [2,0,0]": {
        "selser": "1jut7m6\n\nA <ref name=\"x\">foo</ref>\nB <ref name=\" x \" />\nC <ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[3,0,4,0,0,0],4,0]": {
        "selser": "<ref name=\"x\">foo</ref>1c9mhyo<ref name=\" x \" />\nC <ref name= x  />\n\n1f5a5xx<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [1,2,0]": {
        "selser": "A <ref name=\"x\">foo</ref>\nB <ref name=\" x \" />\nC <ref name= x  />\n\n1d4omiq\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [0,4,0]": {
        "selser": "A <ref name=\"x\">foo</ref>\nB <ref name=\" x \" />\nC <ref name= x  />\n\n8n56tv<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[4,0,2,0,0,0],0,0]": {
        "selser": "av0irw<ref name=\"x\">foo</ref>63jwli\nB <ref name=\" x \" />\nC <ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[3,0,3,0,0,0],0,0]": {
        "selser": "<ref name=\"x\">foo</ref><ref name=\" x \" />\nC <ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[0,0,4,0,3,0],4,0]": {
        "selser": "A <ref name=\"x\">foo</ref>1dkz2w8<ref name=\" x \" /><ref name= x  />\n\nti4ywv<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[4,0,0,0,3,0],2,0]": {
        "selser": "cvv2e<ref name=\"x\">foo</ref>\nB <ref name=\" x \" /><ref name= x  />\n\n33wcuy\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[3,0,3,0,0,0],2,0]": {
        "selser": "<ref name=\"x\">foo</ref><ref name=\" x \" />\nC <ref name= x  />\n\nkmsr29\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [1,0,0]": {
        "selser": "A <ref name=\"x\">foo</ref>\nB <ref name=\" x \" />\nC <ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[3,0,0,0,0,0],3,0]": {
        "selser": "<ref name=\"x\">foo</ref>\nB <ref name=\" x \" />\nC <ref name= x  /><references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[3,0,4,0,2,0],0,0]": {
        "selser": "<ref name=\"x\">foo</ref>101p079<ref name=\" x \" />3m6jc7\nC <ref name= x  />\n<references />"
    },
    "Ref: 3. spaces in ref-names should be ignored [[0,0,0,0,4,0],0,0]": {
        "selser": "A <ref name=\"x\">foo</ref>\nB <ref name=\" x \" />baab28<ref name= x  />\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[3,0,0],0,0]": {
        "selser": "<ref> foo {{echo|</ref> B C}}\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[3,0,0],3,0]": {
        "selser": "<ref> foo {{echo|</ref> B C}}<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [0,2,0]": {
        "selser": "A <ref> foo {{echo|</ref> B C}}\n\n232wei\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[0,0,2],2,0]": {
        "selser": "A <ref> foo {{echo|</ref><nowiki>lhhaci B C}}</nowiki>\n\n1rk0l3t\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [1,4,0]": {
        "selser": "A <ref> foo {{echo|</ref> B C}}\n\nu9t9ud<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [0,3,0]": {
        "selser": "A <ref> foo {{echo|</ref> B C}}<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[2,0,0],0,0]": {
        "selser": "tz66ieA <ref> foo {{echo|</ref> B C}}\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[2,0,4],0,0]": {
        "selser": "1spohtmA <ref> foo {{echo|</ref>fdorka\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [0,4,0]": {
        "selser": "A <ref> foo {{echo|</ref> B C}}\n\n1hy11rc<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[4,0,3],4,0]": {
        "selser": "1abu1po<ref> foo {{echo|</ref>\n\n1ly2yt3<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [1,0,0]": {
        "selser": "A <ref> foo {{echo|</ref> B C}}\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[3,0,0],2,0]": {
        "selser": "<ref> foo {{echo|</ref> B C}}\n\n733hyo\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[4,0,2],3,0]": {
        "selser": "kfd1um<ref> foo {{echo|</ref><nowiki>1qghqn9 B C}}</nowiki><references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [2,0,0]": {
        "selser": "1g727md\n\nA <ref> foo {{echo|</ref> B C}}\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[2,0,0],2,0]": {
        "selser": "1afn0jkA <ref> foo {{echo|</ref> B C}}\n\n11z3b8h\n\n<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[0,0,4],4,0]": {
        "selser": "A <ref> foo {{echo|</ref>1vutmtj\n\nd3igfs<references />"
    },
    "Ref: 8. transclusion wikitext has lower precedence [[4,0,2],4,0]": {
        "selser": "196plys<ref> foo {{echo|</ref><nowiki>1jwbmk4 B C}}</nowiki>\n\n1k9iwxo<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [2,3,0]": {
        "selser": "5vqncy\n\nA <ref> foo <!--</ref> B C<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[4,0,0],4,0]": {
        "selser": "enxstj<ref> foo <!--</ref> B C\n\nffz473<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[0,0,4],3,0]": {
        "selser": "A <ref> foo <!--</ref>bkgoyg<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[2,0,0],2,0]": {
        "selser": "fvipshA <ref> foo <!--</ref> B C\n\n1kr7noz\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [1,0,0]": {
        "selser": "A <ref> foo <!--</ref> B C\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[2,0,0],0,0]": {
        "selser": "nme5ogA <ref> foo <!--</ref> B C\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[3,0,2],0,0]": {
        "selser": "<ref> foo <!--</ref>1eg7mz8 B C\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[4,0,4],2,0]": {
        "selser": "h9unkw<ref> foo <!--</ref>nr923z\n\ntcumap\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[3,0,4],0,0]": {
        "selser": "<ref> foo <!--</ref>3e486e\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [1,2,0]": {
        "selser": "A <ref> foo <!--</ref> B C\n\nbzoeog\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[2,0,0],4,0]": {
        "selser": "gk7d8eA <ref> foo <!--</ref> B C\n\n18hcbar<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[4,0,0],3,0]": {
        "selser": "1eumrqx<ref> foo <!--</ref> B C<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [2,0,0]": {
        "selser": "ddvova\n\nA <ref> foo <!--</ref> B C\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[0,0,2],0,0]": {
        "selser": "A <ref> foo <!--</ref>1gt768x B C\n<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[3,0,3],4,0]": {
        "selser": "<ref> foo <!--</ref>\n\n19u9571<references />"
    },
    "Ref: 9. unclosed comments should not leak out of ref-body [[0,0,4],2,0]": {
        "selser": "A <ref> foo <!--</ref>17e7gw7\n\n12k43e1\n<references />"
    },
    "Ref: 12. ref-tags act as trailing newline migration barrier [4,[2],3,2,4,[4],3,0]": {
        "selser": "7i6vwo\n\nfzf7t0a\n\n1cltg43\n\nb<!--the newline at the end of this line stays inside the p tag--> <ref />\n<ref />\n\n7vjkpr\n\n1vn32lo\n<references />"
    },
    "Counters should be cleared after processing named <references group=\"…\"> [2,0,0,4,[4,0],3,0]": {
        "selser": "1m78266\n\nA <ref group=\"g\">foo</ref>\n\n<references group=\"g\" />g92zhb\n\n1sqtkvt<ref group=\"g\">bar</ref>\n\n<references group=\"g\" />"
    },
    "References: 9. Generate missing references list at the end [0,4,0,3,0]": {
        "selser": "A <ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>\n\ng0czw3"
    },
    "References: 9. Generate missing references list at the end [4,4,0,4,0]": {
        "selser": "whc1pl\n\n1mmf2281nhjc7y"
    },
    "References: 9. Generate missing references list at the end [[2,0,2,0],0,0,3,0]": {
        "selser": "1cd0gbiA <ref>foo</ref>117zkke\nB <ref group=\"inexistent\">bar</ref>\n"
    },
    "References: 9. Generate missing references list at the end [3,0,0,2,0]": {
        "selser": "\njqowq3\n"
    },
    "References: 9. Generate missing references list at the end [[0,0,2,0],2,0,0,0]": {
        "selser": "A <ref>foo</ref>10zxrbq\nB <ref group=\"inexistent\">bar</ref>\n\nuou6bv\n"
    },
    "References: 9. Generate missing references list at the end [4,2,0,3,0]": {
        "selser": "4w7riv\n\n1rg9j19\n"
    },
    "References: 9. Generate missing references list at the end [0,3,0,0,0]": {
        "selser": "A <ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>"
    },
    "References: 9. Generate missing references list at the end [[0,0,4,0],0,0,4,0]": {
        "selser": "A <ref>foo</ref>dhfezw<ref group=\"inexistent\">bar</ref>\n1vxqzn3"
    },
    "References: 9. Generate missing references list at the end [[0,0,4,0],0,0,3,0]": {
        "selser": "A <ref>foo</ref>b00lv8<ref group=\"inexistent\">bar</ref>\n"
    },
    "References: 9. Generate missing references list at the end [[3,0,0,0],3,0,0,0]": {
        "selser": "<ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>"
    },
    "References: 9. Generate missing references list at the end [3,3,0,0,0]": {
        "selser": ""
    },
    "References: 9. Generate missing references list at the end [[4,0,4,0],2,0,4,0]": {
        "selser": "w7dk2y<ref>foo</ref>10mrqy6<ref group=\"inexistent\">bar</ref>\n\n2w18lh\nd4iu9c"
    },
    "References: 9. Generate missing references list at the end [4,3,0,2,0]": {
        "selser": "o4n0p9yt1njz\n"
    },
    "References: 9. Generate missing references list at the end [2,3,0,0,0]": {
        "selser": "1wqrh49\n\nA <ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>"
    },
    "References: 9. Generate missing references list at the end [[4,0,0,0],3,0,0,0]": {
        "selser": "yo0bpd<ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>"
    },
    "References: 9. Generate missing references list at the end [[4,0,0,0],0,0,2,0]": {
        "selser": "14agw3g<ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>\n1gnz03z\n"
    },
    "References: 9. Generate missing references list at the end [1,3,0,0,0]": {
        "selser": "A <ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>"
    },
    "References: 9. Generate missing references list at the end [0,0,0,4,0]": {
        "selser": "A <ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>3nzqah"
    },
    "References: 9. Generate missing references list at the end [[4,0,0,0],3,0,3,0]": {
        "selser": "8kgceb<ref>foo</ref>\nB <ref group=\"inexistent\">bar</ref>"
    },
    "References: 9. Generate missing references list at the end [3,0,0,0,0]": {
        "selser": "\n"
    }
}